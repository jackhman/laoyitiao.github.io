import{_ as o,j as e,o as t,g as c,k as l,h as s,Q as p,s as n}from"./chunks/framework.cfb14fe0.js";const w=JSON.parse('{"title":"25CICD：容器化后如何实现持续集成与交付？（下）","description":"","frontmatter":{},"headers":[],"relativePath":"posts/backEnd/045_由浅入深吃透 Docker/(4596) 25  CICD：容器化后如何实现持续集成与交付？（下）.md","filePath":"posts/backEnd/045_由浅入深吃透 Docker/(4596) 25  CICD：容器化后如何实现持续集成与交付？（下）.md","lastUpdated":1696682708000}'),r={name:"posts/backEnd/045_由浅入深吃透 Docker/(4596) 25  CICD：容器化后如何实现持续集成与交付？（下）.md"},E=p("",11),y=p("",9),i=n("p",null,"项目创建完成后，GitLab 会自动跳转到项目详情页面。",-1),F=n("h3",{id:"_3-创建-jenkins-任务",tabindex:"-1"},[s("3. 创建 Jenkins 任务 "),n("a",{class:"header-anchor",href:"#_3-创建-jenkins-任务","aria-label":'Permalink to "3. 创建 Jenkins 任务"'},"​")],-1),d=n("p",null,"在 Jenkins 中添加一个自由风格的任务。",-1),h=n("p",null,"点击确定，然后到源码管理选择 Git，填写 GitLab 项目的 URL。此时 Jenkins 会提示没有访问 GitLab 的相关权限，我们需要点击添加按钮将私钥添加到 Jenkins 中用以鉴权。",-1),C=n("blockquote",null,[n("p",null,"由于部署 GitLab 的宿主机 ssh 默认端口为 22，为了避免与宿主机的 ssh 端口冲突，我们的 GitLab ssh 端口配置为 2222，因此 Jenkins 连接 GitLab 的 URL 中需要包含端口号 2222， 配置格式为 ssh://git@172.20.1.6:2222/root/hello.git。")],-1),A=n("p",null,'选择添加的密钥类型为 "SSH Username with private key"，Username 设置为 jenkins，然后将私钥粘贴到 Private Key 输入框中，点击添加即可。',-1),g=n("p",null,"添加完成后，认证名称选择 jenkins 后，红色报错提示就会消失。这证明此时 Jenkins 和 GitLab 已经认证成功，可以成功从 GitLab 拉取代码了。",-1),u=p("",2),D=n("p",null,"完成后点击保存，此时任务已经成功添加到 Jenkins 中。回到任务首页，点击构建按钮即可开始构建。第一次构建需要下载依赖的基础镜像，这个过程可能比较慢。构建过程中，我们也可以点击控制台查看构建输出的内容：",-1),k=n("h3",{id:"_4-配置自动构建",tabindex:"-1"},[s("4. 配置自动构建 "),n("a",{class:"header-anchor",href:"#_4-配置自动构建","aria-label":'Permalink to "4. 配置自动构建"'},"​")],-1),_=n("p",null,"点击上一步创建的任务，点击配置进入任务配置界面，到构建触发器下勾选 GitLab 相关的选项，点击 Generate 按钮生成一个 GitLab 回调 Jenkins 的 token。记录下 Jenkins 的回调地址和生成的 token 信息。",-1),m=n("p",null,"在 GitLab 项目设置中，选择 Webhooks，将 Jenkins 的回调地址和 token 信息添加到 Webhooks 的配置中，点击添加即可。",-1),b=p("",9),B=n("p",null,[n("strong",null,"第二步，配置 Publish Over SSH 插件。"),s(" 插件安装完成后，在 Jenkins 系统管理的系统设置下，找到 Publish Over SSH 功能模块，添加远程服务器节点，这里我使用密码验证的方式添加一台服务器。配置好后，我们可以使用测试按钮测试服务器是否可以正常连接，显示Success 代表服务器可以正常连接，测试连接成功后，点击保存按钮保存配置。")],-1),S=p("",4),v=p("",7);function q(R,I,O,T,f,G){const a=e("Image");return t(),c("div",null,[E,l(a,{alt:"Drawing 0.png",src:"https://s0.lgstatic.com/i/image/M00/6F/A8/CgqCHl-2P_qAO6VIAAIAcpA55IY226.png"}),s(),y,l(a,{alt:"Drawing 1.png",src:"https://s0.lgstatic.com/i/image/M00/6F/A8/CgqCHl-2QA2ARz39AADE_fukgio780.png"}),s(),l(a,{alt:"Drawing 2.png",src:"https://s0.lgstatic.com/i/image/M00/6F/A9/CgqCHl-2QQCAZUxWAAF7KHvN2DI582.png"}),s(),i,l(a,{alt:"Drawing 3.png",src:"https://s0.lgstatic.com/i/image/M00/6F/9D/Ciqc1F-2QQeAXsbVAAELrFGkphU008.png"}),s(),F,d,l(a,{alt:"Drawing 4.png",src:"https://s0.lgstatic.com/i/image/M00/6F/9D/Ciqc1F-2QRGAIS83AAGKHDb05xE232.png"}),s(),h,l(a,{alt:"Drawing 5.png",src:"https://s0.lgstatic.com/i/image/M00/6F/9D/Ciqc1F-2QSWAceMNAADnnjcKzCo548.png"}),s(),C,A,l(a,{alt:"Drawing 6.png",src:"https://s0.lgstatic.com/i/image/M00/6F/9D/Ciqc1F-2QTSARpg5AAET_4BGb-0066.png"}),s(),g,l(a,{alt:"Drawing 7.png",src:"https://s0.lgstatic.com/i/image/M00/6F/A9/CgqCHl-2QTqAQf8RAACXxIBN-Z8663.png"}),s(),u,l(a,{alt:"Drawing 8.png",src:"https://s0.lgstatic.com/i/image/M00/6F/A9/CgqCHl-2QUKAJ-psAABwghmp76g949.png"}),s(),D,l(a,{alt:"Drawing 9.png",src:"https://s0.lgstatic.com/i/image/M00/6F/9D/Ciqc1F-2QUuAEXcXAAGe5l9e2h0928.png"}),s(),k,_,l(a,{alt:"Drawing 10.png",src:"https://s0.lgstatic.com/i/image/M00/6F/9E/Ciqc1F-2QWCABHzrAAFQCgpFnLs787.png"}),s(),m,l(a,{alt:"Drawing 11.png",src:"https://s0.lgstatic.com/i/image/M00/6F/9E/Ciqc1F-2QWiAFOVBAAI93Lelr38996.png"}),s(),b,l(a,{alt:"Drawing 12.png",src:"https://s0.lgstatic.com/i/image/M00/6F/A9/CgqCHl-2QfmAc4iBAACDzvOoPWI585.png"}),s(),B,l(a,{alt:"Drawing 13.png",src:"https://s0.lgstatic.com/i/image/M00/6F/A9/CgqCHl-2QgSAVk0bAAC6abody2k836.png"}),s(),S,l(a,{alt:"Drawing 14.png",src:"https://s0.lgstatic.com/i/image/M00/6F/9E/Ciqc1F-2QhKAPblBAAC4Bp33K2Y632.png"}),s(),v])}const x=o(r,[["render",q]]);export{w as __pageData,x as default};
