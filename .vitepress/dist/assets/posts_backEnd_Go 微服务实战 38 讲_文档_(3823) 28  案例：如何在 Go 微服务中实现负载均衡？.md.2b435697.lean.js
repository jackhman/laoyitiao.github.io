import{_ as p,j as e,o as t,g as c,k as l,h as n,s,Q as o}from"./chunks/framework.a0d18f64.js";const P=JSON.parse('{"title":"28案例：如何在Go微服务中实现负载均衡？","description":"","frontmatter":{},"headers":[],"relativePath":"posts/backEnd/Go 微服务实战 38 讲_文档/(3823) 28  案例：如何在 Go 微服务中实现负载均衡？.md","filePath":"posts/backEnd/Go 微服务实战 38 讲_文档/(3823) 28  案例：如何在 Go 微服务中实现负载均衡？.md","lastUpdated":1696682708000}'),r={name:"posts/backEnd/Go 微服务实战 38 讲_文档/(3823) 28  案例：如何在 Go 微服务中实现负载均衡？.md"},y=s("h1",{id:"_28案例-如何在go微服务中实现负载均衡",tabindex:"-1"},[n("28案例：如何在Go微服务中实现负载均衡？ "),s("a",{class:"header-anchor",href:"#_28案例-如何在go微服务中实现负载均衡","aria-label":'Permalink to "28案例：如何在Go微服务中实现负载均衡？"'},"​")],-1),E=s("p",null,"在上一课时中，我们已经介绍了负载均衡的相关概念以及在服务高可用架构中的重要性，也了解了几种主流负载均衡算法的实现。在本课时中，我们将在 Go 微服务实例中具体使用负载均衡技术，并详细说明如何基于服务发现来实现负载均衡的微服务间 HTTP 调用。",-1),i=s("h3",{id:"基于服务发现和注册的负载均衡",tabindex:"-1"},[n("基于服务发现和注册的负载均衡 "),s("a",{class:"header-anchor",href:"#基于服务发现和注册的负载均衡","aria-label":'Permalink to "基于服务发现和注册的负载均衡"'},"​")],-1),d=s("p",null,"我们仍然以之前课时提到的电商商品系统为例，商品详情页面需要展示下游评论系统的具体评论信息，所以商品系统通过 HTTP 请求调用评论系统获取商品评论。下图展示了两个系统的交互情况：",-1),F=o("",12),m=o("",10),h=s("p",null,"基于服务发现和注册的负载均衡示意图",-1),D=s("p",null,"以上就是在 Go 微服务中实现客户端负载均衡的主流实现原理，很多开源负载均衡器（比如，Ribbon 等）都是以这套原理实现的，不过这个过程还是有许多可以优化的细节，比如负载均衡客户端可以使用缓存可用服务列表数据等方式，来避免每次都从 Consul 处获取可用服务列表数据，以此提高效率。",-1),g=s("h3",{id:"运行展示",tabindex:"-1"},[n("运行展示 "),s("a",{class:"header-anchor",href:"#运行展示","aria-label":'Permalink to "运行展示"'},"​")],-1),u=s("p",null,"下面，我们就来具体运行和展示一下本课时的案例项目。",-1),v=s("p",null,"首先，我们启动一个商品系统服务（good）和三个评论系统服务（comment），它们都会将自己注册到服务注册和发现中心 Consul 上。如下是 Consul 相关的截图：",-1),C=s("p",null,"Consul 所有服务列表截图",-1),A=s("p",null,"我们可以从 Consul 的服务列表页面发现有三个 comment 服务实例和一个商品服务实例，这三个 comment 服务实例的具体信息如下图所示，从图中可以看出，它们的 host 信息都是127.0.0.1，但是端口号不同，你也可以将这三个 comment 服务实例部署在不同 IP 地址的服务器上，这样它们的 host 信息就不一样了。",-1),B=o("",12);function f(_,b,k,I,q,S){const a=e("Image");return t(),c("div",null,[y,E,i,d,l(a,{alt:"Drawing 0.png",src:"https://s0.lgstatic.com/i/image/M00/58/EC/Ciqc1F9wY16AQjwDAAAgwx5jOqc017.png"}),n(),F,l(a,{alt:"Drawing 1.png",src:"https://s0.lgstatic.com/i/image/M00/58/F7/CgqCHl9wY26AWGaHAAB21ndPVIY647.png"}),n(),m,l(a,{alt:"Drawing 2.png",src:"https://s0.lgstatic.com/i/image/M00/58/EC/Ciqc1F9wY4WAGxXHAABbFi54b6c310.png"}),n(),h,D,g,u,v,l(a,{alt:"Drawing 3.png",src:"https://s0.lgstatic.com/i/image/M00/58/F7/CgqCHl9wY46AArB3AAcBgrX01wM768.png"}),n(),C,A,l(a,{alt:"Drawing 4.png",src:"https://s0.lgstatic.com/i/image/M00/58/EC/Ciqc1F9wY5mAKpcCAAz-1u-gvNc329.png"}),n(),B])}const N=p(r,[["render",f]]);export{P as __pageData,N as default};
