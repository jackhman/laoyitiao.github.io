var C=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function k(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var A=function(o,n){if(n=n.split(":")[0],o=+o,!o)return!1;switch(n){case"http":case"ws":return o!==80;case"https":case"wss":return o!==443;case"ftp":return o!==21;case"gopher":return o!==70;case"file":return!1}return o!==0},y={},L=Object.prototype.hasOwnProperty,x;function b(t){try{return decodeURIComponent(t.replace(/\+/g," "))}catch{return null}}function U(t){try{return encodeURIComponent(t)}catch{return null}}function z(t){for(var o=/([^=?#&]+)=?([^&]*)/g,n={},e;e=o.exec(t);){var s=b(e[1]),i=b(e[2]);s===null||i===null||s in n||(n[s]=i)}return n}function N(t,o){o=o||"";var n=[],e,s;typeof o!="string"&&(o="?");for(s in t)if(L.call(t,s)){if(e=t[s],!e&&(e===null||e===x||isNaN(e))&&(e=""),s=U(s),e=U(e),s===null||e===null)continue;n.push(s+"="+e)}return n.length?o+n.join("&"):""}y.stringify=N;y.parse=z;var I=A,h=y,P=/^[\x00-\x20\u00a0\u1680\u2000-\u200a\u2028\u2029\u202f\u205f\u3000\ufeff]+/,R=/[\n\r\t]/g,$=/^[A-Za-z][A-Za-z0-9+-.]*:\/\//,O=/:\d+$/,T=/^([a-z][a-z0-9.+-]*:)?(\/\/)?([\\/]+)?([\S\s]*)/i,Z=/^[a-zA-Z]:/;function g(t){return(t||"").toString().replace(P,"")}var w=[["#","hash"],["?","query"],function(o,n){return p(n.protocol)?o.replace(/\\/g,"/"):o},["/","pathname"],["@","auth",1],[NaN,"host",void 0,1,1],[/:(\d*)$/,"port",void 0,1],[NaN,"hostname",void 0,1,1]],q={hash:1,query:1};function S(t){var o;typeof window<"u"?o=window:typeof C<"u"?o=C:typeof self<"u"?o=self:o={};var n=o.location||{};t=t||n;var e={},s=typeof t,i;if(t.protocol==="blob:")e=new c(unescape(t.pathname),{});else if(s==="string"){e=new c(t,{});for(i in q)delete e[i]}else if(s==="object"){for(i in t)i in q||(e[i]=t[i]);e.slashes===void 0&&(e.slashes=$.test(t.href))}return e}function p(t){return t==="file:"||t==="ftp:"||t==="http:"||t==="https:"||t==="ws:"||t==="wss:"}function j(t,o){t=g(t),t=t.replace(R,""),o=o||{};var n=T.exec(t),e=n[1]?n[1].toLowerCase():"",s=!!n[2],i=!!n[3],a=0,f;return s?i?(f=n[2]+n[3]+n[4],a=n[2].length+n[3].length):(f=n[2]+n[4],a=n[2].length):i?(f=n[3]+n[4],a=n[3].length):f=n[4],e==="file:"?a>=2&&(f=f.slice(2)):p(e)?f=n[4]:e?s&&(f=f.slice(2)):a>=2&&p(o.protocol)&&(f=n[4]),{protocol:e,slashes:s||p(e),slashesCount:a,rest:f}}function v(t,o){if(t==="")return o;for(var n=(o||"/").split("/").slice(0,-1).concat(t.split("/")),e=n.length,s=n[e-1],i=!1,a=0;e--;)n[e]==="."?n.splice(e,1):n[e]===".."?(n.splice(e,1),a++):a&&(e===0&&(i=!0),n.splice(e,1),a--);return i&&n.unshift(""),(s==="."||s==="..")&&n.push(""),n.join("/")}function c(t,o,n){if(t=g(t),t=t.replace(R,""),!(this instanceof c))return new c(t,o,n);var e,s,i,a,f,l,u=w.slice(),d=typeof o,r=this,m=0;for(d!=="object"&&d!=="string"&&(n=o,o=null),n&&typeof n!="function"&&(n=h.parse),o=S(o),s=j(t||"",o),e=!s.protocol&&!s.slashes,r.slashes=s.slashes||e&&o.slashes,r.protocol=s.protocol||o.protocol||"",t=s.rest,(s.protocol==="file:"&&(s.slashesCount!==2||Z.test(t))||!s.slashes&&(s.protocol||s.slashesCount<2||!p(r.protocol)))&&(u[3]=[/(.*)/,"pathname"]);m<u.length;m++){if(a=u[m],typeof a=="function"){t=a(t,r);continue}i=a[0],l=a[1],i!==i?r[l]=t:typeof i=="string"?(f=i==="@"?t.lastIndexOf(i):t.indexOf(i),~f&&(typeof a[2]=="number"?(r[l]=t.slice(0,f),t=t.slice(f+a[2])):(r[l]=t.slice(f),t=t.slice(0,f)))):(f=i.exec(t))&&(r[l]=f[1],t=t.slice(0,f.index)),r[l]=r[l]||e&&a[3]&&o[l]||"",a[4]&&(r[l]=r[l].toLowerCase())}n&&(r.query=n(r.query)),e&&o.slashes&&r.pathname.charAt(0)!=="/"&&(r.pathname!==""||o.pathname!=="")&&(r.pathname=v(r.pathname,o.pathname)),r.pathname.charAt(0)!=="/"&&p(r.protocol)&&(r.pathname="/"+r.pathname),I(r.port,r.protocol)||(r.host=r.hostname,r.port=""),r.username=r.password="",r.auth&&(f=r.auth.indexOf(":"),~f?(r.username=r.auth.slice(0,f),r.username=encodeURIComponent(decodeURIComponent(r.username)),r.password=r.auth.slice(f+1),r.password=encodeURIComponent(decodeURIComponent(r.password))):r.username=encodeURIComponent(decodeURIComponent(r.auth)),r.auth=r.password?r.username+":"+r.password:r.username),r.origin=r.protocol!=="file:"&&p(r.protocol)&&r.host?r.protocol+"//"+r.host:"null",r.href=r.toString()}function D(t,o,n){var e=this;switch(t){case"query":typeof o=="string"&&o.length&&(o=(n||h.parse)(o)),e[t]=o;break;case"port":e[t]=o,I(o,e.protocol)?o&&(e.host=e.hostname+":"+o):(e.host=e.hostname,e[t]="");break;case"hostname":e[t]=o,e.port&&(o+=":"+e.port),e.host=o;break;case"host":e[t]=o,O.test(o)?(o=o.split(":"),e.port=o.pop(),e.hostname=o.join(":")):(e.hostname=o,e.port="");break;case"protocol":e.protocol=o.toLowerCase(),e.slashes=!n;break;case"pathname":case"hash":if(o){var s=t==="pathname"?"/":"#";e[t]=o.charAt(0)!==s?s+o:o}else e[t]=o;break;case"username":case"password":e[t]=encodeURIComponent(o);break;case"auth":var i=o.indexOf(":");~i?(e.username=o.slice(0,i),e.username=encodeURIComponent(decodeURIComponent(e.username)),e.password=o.slice(i+1),e.password=encodeURIComponent(decodeURIComponent(e.password))):e.username=encodeURIComponent(decodeURIComponent(o))}for(var a=0;a<w.length;a++){var f=w[a];f[4]&&(e[f[1]]=e[f[1]].toLowerCase())}return e.auth=e.password?e.username+":"+e.password:e.username,e.origin=e.protocol!=="file:"&&p(e.protocol)&&e.host?e.protocol+"//"+e.host:"null",e.href=e.toString(),e}function F(t){(!t||typeof t!="function")&&(t=h.stringify);var o,n=this,e=n.host,s=n.protocol;s&&s.charAt(s.length-1)!==":"&&(s+=":");var i=s+(n.protocol&&n.slashes||p(n.protocol)?"//":"");return n.username?(i+=n.username,n.password&&(i+=":"+n.password),i+="@"):n.password?(i+=":"+n.password,i+="@"):n.protocol!=="file:"&&p(n.protocol)&&!e&&n.pathname!=="/"&&(i+="@"),(e[e.length-1]===":"||O.test(n.hostname)&&!n.port)&&(e+=":"),i+=e+n.pathname,o=typeof n.query=="object"?t(n.query):n.query,o&&(i+=o.charAt(0)!=="?"?"?"+o:o),n.hash&&(i+=n.hash),i}c.prototype={set:D,toString:F};c.extractProtocol=j;c.location=S;c.trimLeft=g;c.qs=h;var _=c;const E=k(_);export{E as U,C as c,k as g};
