import{_ as l,j as o,o as t,g as r,k as e,h as n,s,Q as p}from"./chunks/framework.4e7d56ce.js";const q=JSON.parse('{"title":"第25讲：trace-receiver插件拆解，Trace蕴含的宝贵信息（上）","description":"","frontmatter":{},"headers":[],"relativePath":"posts/backEnd/098-讲带你搞懂 SkyWalking文档/(1743) 第25讲：trace-receiver 插件拆解，Trace 蕴含的宝贵信息（上）.md","filePath":"posts/backEnd/098-讲带你搞懂 SkyWalking文档/(1743) 第25讲：trace-receiver 插件拆解，Trace 蕴含的宝贵信息（上）.md","lastUpdated":1696682708000}'),c={name:"posts/backEnd/098-讲带你搞懂 SkyWalking文档/(1743) 第25讲：trace-receiver 插件拆解，Trace 蕴含的宝贵信息（上）.md"},E=s("h1",{id:"第25讲-trace-receiver插件拆解-trace蕴含的宝贵信息-上",tabindex:"-1"},[n("第25讲：trace-receiver插件拆解，Trace蕴含的宝贵信息（上） "),s("a",{class:"header-anchor",href:"#第25讲-trace-receiver插件拆解-trace蕴含的宝贵信息-上","aria-label":'Permalink to "第25讲：trace-receiver插件拆解，Trace蕴含的宝贵信息（上）"'},"​")],-1),y=s("p",null,"在上一课时中，我介绍了 SkyWalking OAP 处理 Metrics 监控数据的完整流程。本课时将开始介绍 Trace 处理的相关内容。",-1),i=s("h3",{id:"tracemoduleprovider",tabindex:"-1"},[n("TraceModuleProvider "),s("a",{class:"header-anchor",href:"#tracemoduleprovider","aria-label":'Permalink to "TraceModuleProvider"'},"​")],-1),d=s("p",null,"本课时重点内容是来看 OAP 中的 trace-receiver-plugin 如何接收 TraceSegment 数据。",-1),g=s("p",null,"目前 trace-receiver-plugin 插件同时支持处理 V1 和 V2 两个版本的 TraceSegment。本课时重点分析 V2 版本 TraceSegment，后面不进行特殊说明的情况下，都是指 V2 版本 TraceSegment。",-1),m=s("p",null,"在 trace-receiver-plugin 插件的 SPI 文件中指定的 ModuleProvider 实现是 TraceModuleProvider，在 prepare() 方法中主要初始化 SegmentParseV2 解析器，SegmentParseV2 主要负责解析 TraceSegment 数据，具体实现后面会详细分析。",-1),S=s("p",null,"TraceModuleProvider 的 start() 方法核心是将 TraceSegmentReportServiceHandler 注册到 GRPCHandlerRegister 中。TraceSegmentReportServiceHandler 负责接收 Agent 发送来的 TraceSegment 数据，并调用 SegmentParseV2.parse() 方法进行解析，如下图所示：",-1),u=p("",6),F=p("",10),D=p("",17),v=p("",34),C=s("p",null,"如上图所示，RecordPersistentWorker 也继承了 PersistentWorker，写入流程大致如下图所示：",-1),A=p("",6);function I(h,B,T,b,f,_){const a=o("Image");return t(),r("div",null,[E,y,i,d,g,m,S,e(a,{alt:"Drawing 0.png",src:"https://s0.lgstatic.com/i/image/M00/1B/D7/CgqCHl7fSYGAKb4lAAEg6Xckx78215.png"}),n(),u,e(a,{alt:"Drawing 1.png",src:"https://s0.lgstatic.com/i/image/M00/1B/D7/CgqCHl7fSYqALG1gAAGuE9qIaPk072.png"}),n(),F,e(a,{alt:"Drawing 2.png",src:"https://s0.lgstatic.com/i/image/M00/1B/D7/CgqCHl7fSZuAcM1EAAG3Hx3xP4Y420.png"}),n(),D,e(a,{alt:"Drawing 3.png",src:"https://s0.lgstatic.com/i/image/M00/1B/CC/Ciqc1F7fSaaAbOcSAAApWn6Htjw623.png"}),n(),v,e(a,{alt:"Drawing 4.png",src:"https://s0.lgstatic.com/i/image/M00/1B/D7/CgqCHl7fSbWALRYDAAEn3HDWLfM382.png"}),n(),C,e(a,{alt:"Drawing 5.png",src:"https://s0.lgstatic.com/i/image/M00/1B/CC/Ciqc1F7fSbuAPPvbAAG3YJeCl48222.png"}),n(),A])}const L=l(c,[["render",I]]);export{q as __pageData,L as default};
