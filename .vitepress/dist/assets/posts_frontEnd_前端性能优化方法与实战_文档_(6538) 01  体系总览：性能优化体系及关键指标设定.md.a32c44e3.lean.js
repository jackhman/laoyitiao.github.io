import{_ as e,j as a,o as l,g as r,k as p,h as o,Q as n,s as t}from"./chunks/framework.4e7d56ce.js";const K=JSON.parse('{"title":"01体系总览：性能优化体系及关键指标设定","description":"","frontmatter":{},"headers":[],"relativePath":"posts/frontEnd/前端性能优化方法与实战_文档/(6538) 01  体系总览：性能优化体系及关键指标设定.md","filePath":"posts/frontEnd/前端性能优化方法与实战_文档/(6538) 01  体系总览：性能优化体系及关键指标设定.md","lastUpdated":1696682708000}'),_={name:"posts/frontEnd/前端性能优化方法与实战_文档/(6538) 01  体系总览：性能优化体系及关键指标设定.md"},i=n("",12),c=n("",47),h=t("p",null,"首屏时间",-1),u=t("p",null,"在加载性能指标方面，相比于白屏时间，首屏时间更重要。为什么？",-1),d=t("ul",null,[t("li",null,[t("p",null,"从重要性角度看，打开页面后，第一眼看到的内容一般都非常关键，比如电商的头图、商品价格、购买按钮等。这些内容即便在最恶劣的网络环境下，我们也要确保用户能看得到。")]),t("li",null,[t("p",null,"从体验完整性角度看，进入页面后先是白屏，随着第一个字符加载，到首屏内容显示结束，我们才会认为加载完毕，用户可以使用了。")])],-1),g=t("p",null,"白屏加载完成后，仅仅意味着页面内容开始加载，但我们还是没法完成诸如下单购买等实际操作，首屏时间结束后则可以。",-1),m=t("p",null,"首屏时间的标准，最初只是根据这个页面对时间是否敏感来判定，主要以用户平均首屏加载时间来计算，并没有详细区分 2G/3G/4G/WiFi 这些网络环境。比如，下图是我 2011 年在百度文库做性能优化项目时，跟团队定的性能标准。",-1),A=t("p",null,"白屏首屏早期标准",-1),P=t("p",null,"如果一个站点对时间敏感，首屏时间在 1s 内，用户感觉会很快；如果首屏时间超过 2.5s，用户就会感觉很慢。但是在 1s 内打开页面，人们对这么短的时间并不敏感，体验不出 10ms 和 50ms 有什么差别。",-1),q=t("p",null,"但当到了 2G/3G 弱网环境，或者网络不稳定的环境（如坐火车或乘飞机时），用户联网加载的时间会特别长，严重影响整体指标。就好像 100 个穷人和马云一起，看平均资产差不多每人 5 个亿，但实际上多数人并没有那么多钱。性能也如此，前端工程师在使用过程中，越来越觉得用平均值来表示加载时间并不准确可靠。",-1),b=t("p",null,"于是，人们又开始采用中位数，做正态分布，看分位值统计。在对首屏时间进行数据分析和可视化展现时，经常用到的是 P50（50分位值）、P90（90分位值）、P99（99分位值）。它们是怎么得出的呢？以 P99 为例，我们是把所有首屏时间排序，得出排在第 99 位的首屏时间就是 P99。",-1),f=t("p",null,[o("不过这样处理起来还是比较麻烦，后来为了计算简单，也便于理解，我们引入了"),t("strong",null,"秒开率"),o("的指标，即 1s 内打开用户的占比。这个概念最早来自阿里巴巴，后来被业界普遍采用。")],-1),S=t("p",null,"下面是我在带领团队做 App 性能优化项目时，按照秒开率建立的首屏时间标准。",-1),T=t("p",null,"首屏时间秒开率标准",-1),k=t("p",null,"可以说，性能指标和标准建立到这里，已经 OK了，业界能做到这一点的公司屈指可数。",-1),C=t("p",null,"但还有一个问题，首屏时间毕竟粒度太粗了，如果首屏时间长，白屏时间短，到底是哪里的问题？是数据接口的问题，还是页面渲染问题？所以我们还必须把这个指标进一步拆解细化。",-1),D=t("p",null,[t("strong",null,"首屏时间可以拆分为白屏时间、数据接口响应时间、图片加载资源等。"),o(" 白屏时间前面已经提到了，数据接口响应时间可以直接从后端服务中获取，不需要前端再重复计算，我们只需取完放在性能平台即可。最后的图片资源需要我们单独采集。")],-1),x=t("p",null,"以上就是前端性能体系中的关键指标，还有一些不太重要的指标，如卡顿、完全加载时间、资源加载时间等，我在后期介绍采集时再聊。",-1),N=t("h3",{id:"小结",tabindex:"-1"},[o("小结 "),t("a",{class:"header-anchor",href:"#小结","aria-label":'Permalink to "小结"'},"​")],-1),G=t("p",null,"好了，这一讲就到这里。希望今天的内容能让你对整个性能优化体系有个更好的认知，也相信你已经明白，学习性能优化并不仅仅是掌握一些优化技巧就可以了。特别要注意的是，进行性能优化，指标就是我们的一个抓手，首先你就要确定它的指标，然后才能根据指标去采取措施，否则就会像无头苍蝇一样乱撞，没有执行目标。",-1),I=t("p",null,"内容的最后，我想请你思考一个问题：",-1),L=t("blockquote",null,[t("p",null,"前面我重点讲了加载方向的指标，在交互和视觉稳定性两个方向，因为我们还在做指标设定和采集的试验，所以没展开。你有想过这个指标怎么设定和计算的吗？"),t("p",null,"提示：2020 年 12 月 19 日，第 15 届的 D2 会议上 Google 公司也会分享这个指标设定和计算的一些细节。")],-1),M=t("p",null,"欢迎把你的想法写在留言区。下一讲，我们将切入实际优化过程，先从页面打开全过程来看看页面加载链路上的性能瓶颈点。",-1),w=t("hr",null,null,-1),B=t("p",null,"[",-1),F=t("p",null,[o("]("),t("a",{href:"https://shenceyun.lagou.com/t/mka",target:"_blank",rel:"noreferrer"},"https://shenceyun.lagou.com/t/mka"),o(")")],-1),V=t("p",null,[t("strong",null,"《大前端高薪训练营》")],-1),E=t("p",null,[o("12 个月打磨，6 个月训练，优秀学员大厂内推，"),t("a",{href:"https://shenceyun.lagou.com/t/mka",target:"_blank",rel:"noreferrer"},"点击报名，高薪有你"),o("！")],-1);function H(W,O,y,v,z,$){const s=a("Image");return l(),r("div",null,[i,p(s,{alt:"Drawing 1.png",src:"https://s0.lgstatic.com/i/image6/M01/04/C2/Cgp9HWAuNm2ASt5qAAFXu-AqwBI232.png"}),o(),c,p(s,{alt:"Drawing 3.png",src:"https://s0.lgstatic.com/i/image6/M01/04/BE/CioPOWAuNpyAe4LhAABBpdi97gY708.png"}),o(),h,u,d,g,m,p(s,{alt:"Drawing 4.png",src:"https://s0.lgstatic.com/i/image6/M01/04/BF/CioPOWAuN0qAaSb4AAD1t7w10sA207.png"}),o(),A,P,q,b,f,S,p(s,{alt:"Drawing 5.png",src:"https://s0.lgstatic.com/i/image6/M01/04/BF/CioPOWAuN0GAA3cAAADYAqokeNs515.png"}),o(),T,k,C,D,x,N,G,p(s,{alt:"溪风的web前端优化.png",src:"https://s0.lgstatic.com/i/image6/M00/05/7D/CioPOWAwzHeAVEFlAAFMjkdIexg335.png"}),o(),I,L,M,w,B,p(s,{alt:"微信图片_20210218174704.png",src:"https://s0.lgstatic.com/i/image6/M00/05/7D/CioPOWAwzC2AW_ZLAAdqMM6w3z0058.png"}),o(),F,V,E])}const R=e(_,[["render",H]]);export{K as __pageData,R as default};
