import{_ as o,j as e,o as r,g as t,k as n,s,h as p,Q as l}from"./chunks/framework.b3d8e22e.js";const B=JSON.parse('{"title":"Leader 服务器的选举原理 ","description":"","frontmatter":{},"headers":[],"relativePath":"posts/backEnd/ZooKeeper源码分析与实战_文档/(3145) 第15讲：ZooKeeper 究竟是怎么选中 Leader 的？.md","filePath":"posts/backEnd/ZooKeeper源码分析与实战_文档/(3145) 第15讲：ZooKeeper 究竟是怎么选中 Leader 的？.md","lastUpdated":1696417798000}'),c={name:"posts/backEnd/ZooKeeper源码分析与实战_文档/(3145) 第15讲：ZooKeeper 究竟是怎么选中 Leader 的？.md"},E=s("p",null,'在整个高级篇中，我们主要介绍了 ZooKeeper 服务器以及集群的工作原理等相关知识。本课时我们仍然继续上节课的内容，把 Leader 服务器的另一个关键技术点："Leader 服务器是如何产生的"进行详细讲解。',-1),y=s("p",null,"下面我们就深入到 ZooKeeper 的底层，来学习一下 Leader 服务器选举的实现方法。",-1),i=s("h3",{id:"leader-服务器的选举原理",tabindex:"-1"},[p("Leader 服务器的选举原理 "),s("a",{class:"header-anchor",href:"#leader-服务器的选举原理","aria-label":'Permalink to "Leader 服务器的选举原理"'},"​")],-1),d=s("p",null,"Leader 服务器的作用是管理 ZooKeeper 集群中的其他服务器。因此，如果是单独一台服务器，不构成集群规模。在 ZooKeeper 服务的运行中不会选举 Leader 服务器，也不会作为 Leader 服务器运行。在前面的课程中我们介绍过，一个 ZooKeeper 服务要想满足集群方式运行，至少需要三台服务器。本课时我们就以三台服务器组成的 ZooKeeper 集群为例，介绍一下 Leader 服务器选举的内部过程和底层实现。",-1),u=s("h4",{id:"服务启动时的-leader-选举",tabindex:"-1"},[p("服务启动时的 Leader 选举 "),s("a",{class:"header-anchor",href:"#服务启动时的-leader-选举","aria-label":'Permalink to "服务启动时的 Leader 选举"'},"​")],-1),F=s("p",null,"Leader 服务器的选举操作主要发生在两种情况下。第一种就是 ZooKeeper 集群服务启动的时候，第二种就是在 ZooKeeper 集群中旧的 Leader 服务器失效时，这时 ZooKeeper 集群需要选举出新的 Leader 服务器。",-1),h=s("p",null,"我们先来介绍在 ZooKeeper 集群服务最初启动的时候，Leader 服务器是如何选举的。在 ZooKeeper 集群启动时，需要在集群中的服务器之间确定一台 Leader 服务器。当 ZooKeeper 集群中的三台服务器启动之后，首先会进行通信检查，如果集群中的服务器之间能够进行通信。集群中的三台机器开始尝试寻找集群中的 Leader 服务器并进行数据同步等操作。如何这时没有搜索到 Leader 服务器，说明集群中不存在 Leader 服务器。这时 ZooKeeper 集群开始发起 Leader 服务器选举。在整个 ZooKeeper 集群中 Leader 选举主要可以分为三大步骤分别是：发起投票、接收投票、统计投票。",-1),g=l("",9),A=l("",24);function D(m,C,L,v,b,k){const a=e("Image");return r(),t("div",null,[E,y,i,d,u,F,h,n(a,{alt:"2.png",src:"https://s0.lgstatic.com/i/image/M00/26/E5/Ciqc1F7zKQyAK4wsAADnGMCxArI126.png"}),g,n(a,{alt:"1.png",src:"https://s0.lgstatic.com/i/image/M00/26/F1/CgqCHl7zKRuARwOdAACqX-dZDEQ790.png"}),A])}const Z=o(c,[["render",D]]);export{B as __pageData,Z as default};
