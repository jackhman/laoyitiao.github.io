import{_ as p,j as t,o as e,g as c,k as l,h as a,Q as o,s}from"./chunks/framework.4e7d56ce.js";const ps=JSON.parse('{"title":"04工具实践：如何获取代码性能数据？","description":"","frontmatter":{},"headers":[],"relativePath":"posts/backEnd/Java 性能优化实战 21 讲_文档/(4181) 04  工具实践：如何获取代码性能数据？.md","filePath":"posts/backEnd/Java 性能优化实战 21 讲_文档/(4181) 04  工具实践：如何获取代码性能数据？.md","lastUpdated":1696682708000}'),r={name:"posts/backEnd/Java 性能优化实战 21 讲_文档/(4181) 04  工具实践：如何获取代码性能数据？.md"},y=o("",8),E=o("",11),i=s("p",null,"nmonchart 报表",-1),d=s("h3",{id:"jvisualvm-获取-jvm-性能数据",tabindex:"-1"},[a("jvisualvm ------ 获取 JVM 性能数据 "),s("a",{class:"header-anchor",href:"#jvisualvm-获取-jvm-性能数据","aria-label":'Permalink to "jvisualvm ------ 获取 JVM 性能数据"'},"​")],-1),h=s("p",null,"jvisualvm 原是随着 JDK 发布的一个工具，Java 9 之后开始单独发布。通过它，可以了解应用在运行中的内部情况。我们可以连接本地或者远程的服务器，监控大量的性能数据。",-1),_=s("p",null,"通过插件功能，jvisualvm 能获得更强大的扩展。如下图所示，建议把所有的插件下载下来进行体验。",-1),m=o("",5),F=o("",11),C=s("p",null,"JMC 录制结果主界面",-1),g=s("p",null,"通过录制数据，可以清晰了解到某一分钟内，操作系统资源，以及 JVM 内部的性能数据情况。",-1),A=s("h4",{id:"_2-线程",tabindex:"-1"},[a("2.线程 "),s("a",{class:"header-anchor",href:"#_2-线程","aria-label":'Permalink to "2.线程"'},"​")],-1),D=s("p",null,"选择相应的线程，即可了解线程的执行情况，比如 Wait、Idle 、Block 等状态和时序。",-1),u=s("p",null,"以 C2 编译器线程为例，可以看到详细的热点类，以及方法内联后的代码大小。如下图所示，C2 此时正在疯狂运转。",-1),v=s("p",null,"JMC 录制结果 线程界面",-1),B=s("h4",{id:"_3-内存",tabindex:"-1"},[a("3.内存 "),s("a",{class:"header-anchor",href:"#_3-内存","aria-label":'Permalink to "3.内存"'},"​")],-1),f=s("p",null,"通过内存界面，可以看到每个时间段内内存的申请情况。在排查内存溢出、内存泄漏等情况时，这个功能非常有用。",-1),b=s("p",null,"JMC 录制结果 内存界面",-1),k=s("h4",{id:"_4-锁",tabindex:"-1"},[a("4.锁 "),s("a",{class:"header-anchor",href:"#_4-锁","aria-label":'Permalink to "4.锁"'},"​")],-1),T=s("p",null,"一些竞争非常严重的锁信息，以及一些死锁信息，都可以在锁信息界面中找到。",-1),M=s("p",null,"可以看到，一些锁的具体 ID，以及关联的线程信息，都可以进行联动分析。",-1),J=s("p",null,"JMC 录制结果 锁信息界面",-1),j=s("h4",{id:"_5-文件和-socket",tabindex:"-1"},[a("5.文件和 Socket "),s("a",{class:"header-anchor",href:"#_5-文件和-socket","aria-label":'Permalink to "5.文件和 Socket"'},"​")],-1),x=s("p",null,"文件和 Socket 界面能够监控对 I/O 的读写，界面一目了然。如果你的应用 I/O 操作比较繁重，比如日志打印比较多、网络读写频繁，就可以在这里监控到相应的信息，并能够和执行栈关联起来。",-1),P=s("p",null,"JMC 录制结果 文件和 Socket 界面",-1),S=s("h4",{id:"_6-方法调用",tabindex:"-1"},[a("6.方法调用 "),s("a",{class:"header-anchor",href:"#_6-方法调用","aria-label":'Permalink to "6.方法调用"'},"​")],-1),q=s("p",null,"这个和 jvisualvm 的功能类似，展示的是方法调用信息和排行。从这里可以看到一些高耗时方法和热点方法。",-1),w=s("p",null,"JMC 录制结果 方法调用",-1),V=s("h4",{id:"_7-垃圾回收",tabindex:"-1"},[a("7.垃圾回收 "),s("a",{class:"header-anchor",href:"#_7-垃圾回收","aria-label":'Permalink to "7.垃圾回收"'},"​")],-1),L=s("p",null,"如果垃圾回收过于频繁，就会影响应用的性能。JFR 对垃圾回收进行了详细的记录，比如什么时候发生了垃圾回收，用的什么垃圾回收器，每次垃圾回收的耗时，甚至是什么原因引起的等问题，都可以在这里看到。",-1),R=s("p",null,"JMC 录制结果 垃圾回收",-1),I=s("h4",{id:"_8-jit",tabindex:"-1"},[a("8.JIT "),s("a",{class:"header-anchor",href:"#_8-jit","aria-label":'Permalink to "8.JIT"'},"​")],-1),X=s("p",null,"JIT 编译后的代码，执行速度会特别快，但它需要一个编译过程。编译界面显示了详细的 JIT 编译过程信息，包括生成后的 CodeCache 大小、方法内联信息等。",-1),G=s("p",null,"JMC 录制结果 JIT 信息",-1),H=s("h4",{id:"_9-tlab",tabindex:"-1"},[a("9.TLAB "),s("a",{class:"header-anchor",href:"#_9-tlab","aria-label":'Permalink to "9.TLAB"'},"​")],-1),N=s("p",null,"JVM 默认给每个线程开辟一个 buffer 区域，用来加速对象分配，这就是 TLAB（Thread Local Allocation Buffer）的概念。这个 buffer，就放在 Eden 区。",-1),W=s("p",null,"原理和 Java 语言中的 ThreadLocal 类似，能够避免对公共区的操作，可以减少一些锁竞争。如下图所示的界面，详细地显示了这个分配过程。",-1),Q=s("p",null,"JMC 录制结果 TLAB 信息",-1),$=s("p",null,"在后面的课时中，我们会有多个使用此工具的分析案例。",-1),O=s("h3",{id:"arthas-获取单个请求的调用链耗时",tabindex:"-1"},[a("Arthas ------ 获取单个请求的调用链耗时 "),s("a",{class:"header-anchor",href:"#arthas-获取单个请求的调用链耗时","aria-label":'Permalink to "Arthas ------ 获取单个请求的调用链耗时"'},"​")],-1),U=s("p",null,"Arthas 是一个 Java 诊断工具，可以排查内存溢出、CPU 飙升、负载高等内容，可以说是一个 jstack、jmap 等命令的大集合。",-1),Y=o("",16);function K(Z,z,ss,as,ns,ls){const n=t("Image");return e(),c("div",null,[y,l(n,{alt:"Drawing 0.png",src:"https://s0.lgstatic.com/i/image/M00/36/9A/CgqCHl8X2gWANM2wAAkEF7IjoMg031.png"}),a(),E,l(n,{alt:"Drawing 1.png",src:"https://s0.lgstatic.com/i/image/M00/36/8F/Ciqc1F8X2m6ABh9lAAqiFOnIMT0061.png"}),a(),i,d,h,_,l(n,{alt:"Drawing 2.png",src:"https://s0.lgstatic.com/i/image/M00/36/9C/CgqCHl8X3PeAPufLAAPBFcBR8qY801.png"}),a(),m,l(n,{alt:"Drawing 3.png",src:"https://s0.lgstatic.com/i/image/M00/36/9C/CgqCHl8X3QOANLEGAAaKW6xLOSg775.png"}),a(),F,l(n,{alt:"Drawing 4.png",src:"https://s0.lgstatic.com/i/image/M00/36/9C/CgqCHl8X3SyAbYa7AAfd6jZo6t4915.png"}),a(),C,g,A,D,u,l(n,{alt:"Drawing 5.png",src:"https://s0.lgstatic.com/i/image/M00/36/91/Ciqc1F8X3TWASVq0AAY9V2QKEX8030.png"}),a(),v,B,f,l(n,{alt:"Drawing 6.png",src:"https://s0.lgstatic.com/i/image/M00/36/91/Ciqc1F8X3T6AesX5AAcyVYacyeQ529.png"}),a(),b,k,T,M,l(n,{alt:"Drawing 7.png",src:"https://s0.lgstatic.com/i/image/M00/36/9D/CgqCHl8X3UeAJ5L_AAQ7-kTs7YM289.png"}),a(),J,j,x,l(n,{alt:"Drawing 8.png",src:"https://s0.lgstatic.com/i/image/M00/36/91/Ciqc1F8X3VGABH4xAAfkaSBZDio750.png"}),a(),P,S,q,l(n,{alt:"Drawing 9.png",src:"https://s0.lgstatic.com/i/image/M00/36/9D/CgqCHl8X3WOAYQSCAAVmKbHpuBQ717.png"}),a(),w,V,L,l(n,{alt:"Drawing 10.png",src:"https://s0.lgstatic.com/i/image/M00/36/92/Ciqc1F8X3X6ACtlVAAgwHnO3oHQ281.png"}),a(),R,I,X,l(n,{alt:"Drawing 11.png",src:"https://s0.lgstatic.com/i/image/M00/36/9D/CgqCHl8X3Y2AWi8dAAZ8RGTPyoA991.png"}),a(),G,H,N,W,l(n,{alt:"Drawing 12.png",src:"https://s0.lgstatic.com/i/image/M00/36/9D/CgqCHl8X3baAW4VFAAaz04YR1w4277.png"}),a(),Q,$,O,U,l(n,{alt:"Drawing 13.png",src:"https://s0.lgstatic.com/i/image/M00/36/9D/CgqCHl8X3eSAP67rAANG-JDjv2E614.png"}),a(),Y])}const ts=p(r,[["render",K]]);export{ps as __pageData,ts as default};
