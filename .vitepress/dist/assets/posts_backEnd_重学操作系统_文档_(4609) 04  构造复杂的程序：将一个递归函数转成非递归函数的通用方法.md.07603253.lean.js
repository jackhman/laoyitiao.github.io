import{_ as l,j as o,o as e,g as c,k as n,Q as p,s}from"./chunks/framework.4e7d56ce.js";const w=JSON.parse('{"title":"for 循环如何被执行 ","description":"","frontmatter":{},"headers":[],"relativePath":"posts/backEnd/重学操作系统_文档/(4609) 04  构造复杂的程序：将一个递归函数转成非递归函数的通用方法.md","filePath":"posts/backEnd/重学操作系统_文档/(4609) 04  构造复杂的程序：将一个递归函数转成非递归函数的通用方法.md","lastUpdated":1696417798000}'),t={name:"posts/backEnd/重学操作系统_文档/(4609) 04  构造复杂的程序：将一个递归函数转成非递归函数的通用方法.md"},r=p("",38),E=s("p",null,"函数执行过程中，先将执行结果写入栈中，然后在返回前把之前压入的参数出栈，调用方再从栈中取出执行结果。",-1),y=s("p",null,"将参数传递给 Stack 的过程，叫作压栈。取出结果的过程，叫作出栈。栈就好像你书桌上的一摞书，压栈就是把参数放到书上面，出栈就是把顶部的书拿下来。",-1),i=s("p",null,"因为栈中的每个数据大小都一样，所以在函数执行的过程中，我们可以通过参数的个数和参数的序号去计算参数在栈中的位置。",-1),d=s("p",null,"接下来我们来看看函数执行的整体过程：假设要计算 11 和 15 的和，我们首先在内存中开辟一块单独的空间，也就是栈。",-1),F=p("",9),C=s("ul",null,[s("li",null,[s("strong",null,"压栈参数15")])],-1),g=s("p",null,"然后我们用同样的方法将参数 15 压栈。",-1),h=s("p",null,"压栈后，11 和 15 都被放入了对应的内存位置，并且栈指针指向了 0x108。",-1),u=s("ul",null,[s("li",null,[s("strong",null,"将返回值压栈")])],-1),_=s("p",null,"接下来，我们将返回值压栈。到这里你可能会问，返回值还没有计算呢，怎么就压栈了？其实这相当于一个占位，后面我们会改写这个地址。",-1),A=p("",12),v=s("ul",null,[s("li",null,[s("strong",null,"发现-解决问题")])],-1),b=s("p",null,"一个好的解决方案，也会面临问题。现在我们就遇到了麻烦：",-1),k=s("ol",null,[s("li",null,[s("p",null,"函数计算完成，这时应该跳转回去。可是我们没有记录函数调用前 PC 指针的位置，因此这里需要改进，我们需要存储函数调用前的 PC 指针方便调用后恢复。")]),s("li",null,[s("p",null,"栈不可以被无限使用，11和 15 作为参数，计算出了结果 26，那么它们就可以清空了。如果用调整栈指针的方式去清空，我们就会先清空 26。此时就会出现顺序问题，因此我们需要调整压栈的顺序。")])],-1),D=s("p",null,"具体顺序你可以看下图。首先，我们将函数参数和返回值换位，这样在清空数据的时候，就会先清空参数，再清空返回值。",-1),B=p("",7),m=s("p",null,"比如执行 sum(100)，我们就会形成一个复杂的栈，第一次调用 n = 100，第二次递归调用 n = 99：",-1),R=s("p",null,"它们堆在了一起，就形成了一个很大的栈，简化一下就是这样的一个模型，如下所示：",-1),P=p("",10),S=p("",16);function j(f,T,q,$,I,M){const a=o("Image");return e(),c("div",null,[r,n(a,{alt:"Lark20200916-181251.png",src:"https://s0.lgstatic.com/i/image/M00/50/25/Ciqc1F9h5mWAGqrjAABpcF79u8M632.png"}),E,n(a,{alt:"Lark20200916-181255.png",src:"https://s0.lgstatic.com/i/image/M00/50/31/CgqCHl9h5m2ALcHaAABs3s6zJkQ202.png"}),y,i,d,n(a,{alt:"Drawing 2.png",src:"https://s0.lgstatic.com/i/image/M00/50/25/Ciqc1F9h5nWAFY-ZAAAwk_1T41E731.png"}),F,n(a,{alt:"Drawing 3.png",src:"https://s0.lgstatic.com/i/image/M00/50/25/Ciqc1F9h5n-APEFtAAAy3ahEVnE846.png"}),C,g,n(a,{alt:"Drawing 4.png",src:"https://s0.lgstatic.com/i/image/M00/50/31/CgqCHl9h5oWAejVOAAA-DX72fJI426.png"}),h,u,_,n(a,{alt:"Drawing 5.png",src:"https://s0.lgstatic.com/i/image/M00/50/31/CgqCHl9h5o2ARmc3AABEUYqLaKo705.png"}),A,n(a,{alt:"Drawing 6.png",src:"https://s0.lgstatic.com/i/image/M00/50/25/Ciqc1F9h5pWAQ-8nAABHqkFWy4k580.png"}),v,b,k,D,n(a,{alt:"Lark20201225-140329.png",src:"https://s0.lgstatic.com/i/image/M00/8C/1E/CgqCHl_lhT6AP75kAAD-cUrMUNg773.png"}),B,n(a,{alt:"Lark20201225-140329.png",src:"https://s0.lgstatic.com/i/image/M00/8C/1E/CgqCHl_lhQKAIVTlAAD-cUrMUNg043.png"}),m,n(a,{alt:"1.png",src:"https://s0.lgstatic.com/i/image/M00/51/2C/CgqCHl9kbw6AEGmQAADNH1dIS2Q053.png"}),R,n(a,{alt:"2.png",src:"https://s0.lgstatic.com/i/image/M00/51/21/Ciqc1F9kcBCAalP8AACq_zc_LfM551.png"}),P,n(a,{alt:"Lark20200916-181235.png",src:"https://s0.lgstatic.com/i/image/M00/50/25/Ciqc1F9h5rmANakFAACFALCOZaU910.png"}),S])}const x=l(t,[["render",j]]);export{w as __pageData,x as default};
