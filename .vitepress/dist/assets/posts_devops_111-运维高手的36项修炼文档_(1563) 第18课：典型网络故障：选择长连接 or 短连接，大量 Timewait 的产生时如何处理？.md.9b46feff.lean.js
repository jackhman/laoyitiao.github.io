import{_,j as o,o as r,g as l,k as i,h as e,Q as s,s as t}from"./chunks/framework.4e7d56ce.js";const D=JSON.parse('{"title":"第18课：典型网络故障：选择长连接or短连接，大量Timewait的产生时如何处理？","description":"","frontmatter":{},"headers":[],"relativePath":"posts/devops/111-运维高手的36项修炼文档/(1563) 第18课：典型网络故障：选择长连接 or 短连接，大量 Timewait 的产生时如何处理？.md","filePath":"posts/devops/111-运维高手的36项修炼文档/(1563) 第18课：典型网络故障：选择长连接 or 短连接，大量 Timewait 的产生时如何处理？.md","lastUpdated":1696417798000}'),n={name:"posts/devops/111-运维高手的36项修炼文档/(1563) 第18课：典型网络故障：选择长连接 or 短连接，大量 Timewait 的产生时如何处理？.md"},p=s("",7),T=s("",13),c=t("br",null,null,-1),h=t("p",null,'keepalive_timeout 控制着长连接的时间周期。如果我们想要观察是否是客户端和服务端建立起来了 HTTP 长连接，可以在 Chrome 浏览器里打开开发者工具，请求一个网站指定的地址，然后就可以在"network"标签选项里看到请求头和请求返回头，Request Headers 里面有一个 Connection，如果数值是 keep-alive 则表示是以长连接的方式去寻求服务端。',-1),m=t("br",null,null,-1),d=t("br",null,null,-1),b=t("p",null,"要判断服务端返回的内容是否支持长连接，我们也可以通过同样方式，查看 Response Headers 里面的 Connection，如果也是 keep-alive，则表示用双向建立长连接的方式。",-1),u=t("h3",{id:"http-协议与长连接的关系",tabindex:"-1"},[e("HTTP 协议与长连接的关系 "),t("a",{class:"header-anchor",href:"#http-协议与长连接的关系","aria-label":'Permalink to "HTTP 协议与长连接的关系"'},"​")],-1),g=t("p",null,"刚讲到了长连接和短连接原理，那么接下来我们再围绕 HTTP 协议讲一讲它和长连接的关系。我们知道 HTTP 协议是一个常见的互联网协议标准，我们访问网站都使用了 HTTP 协议。HTTP 协议版本分为： 1.0 版本、 1.1 版本及正逐步广泛使用的 HTTP 2.0 版本。",-1),A=t("br",null,null,-1),P=t("br",null,null,-1),C=t("p",null,"HTTP 1.0 是非常早的版本了，它对长连接是不支持的，如果老的浏览器只支持 1.0 版本，就无法建立 HTTP 协议的长连接。HTTP 1.1 版本的话,目前绝大部分的浏览器都是可以支持的， 通过 HTTP1.1 协议可以实现长连接但无法做到复用数据通道做传输，而 HTTP 2.0 是近几年来推出的新协议，不仅支持长连接，更可以支持连接复用数据通道来做传输。",-1),w=t("br",null,null,-1),k=t("p",null,"什么是连接复用传输模式呢？这里我画了两张图，下面这张图是基于 HTTP1.1 的长连接方式。",-1),x=t("br",null,null,-1),q=t("br",null,null,-1),I=t("p",null,"我们会看到建立起一次 TCP 连接以后，传输样例是这样的：客户端向服务端请求一个 index 。html 页面，服务端会返回对应的内容，后面请求 aa.css、bb.js，服务端只能串行逐一返回，每一个请求和对应响应都在一条通道内完整完成后才能请求后一个数据。",-1),H=t("br",null,null,-1),f=t("p",null,'而 HTTP2.0 复用数据的方式是这样的，建立起 TCP 连接通道以后，客户端向服务端请求的是 index html，接下来请求 aa.css 、 bb.js，可以做到同时发起两个请求到服务端，而服务端可以同时响应并行传送数据到客户端，这样就做到了多路"HTTP数据传送"。',-1),v=t("br",null,null,-1),M=s("",29),S=s("",16);function N(V,E,R,W,K,B){const a=o("Image");return r(),l("div",null,[p,i(a,{alt:"",src:"https://s0.lgstatic.com/i/image3/M01/10/79/Ciqah16X-TaACWjHAARWKvt67Qs928.png"}),e(),T,i(a,{alt:"",src:"https://s0.lgstatic.com/i/image3/M01/89/8F/Cgq2xl6X-TaAeLlvAAB2ENLEb-Q379.png"}),e(),c,h,m,i(a,{alt:"",src:"https://s0.lgstatic.com/i/image3/M01/03/4A/CgoCgV6X-TeAAaR6AAB5Rzix4gA237.png"}),e(),d,b,u,g,A,i(a,{alt:"",src:"https://s0.lgstatic.com/i/image3/M01/89/8F/Cgq2xl6X-TeAKMNgAAEzmy2gzLQ928.png"}),e(),P,C,w,k,x,i(a,{alt:"",src:"https://s0.lgstatic.com/i/image3/M01/10/79/Ciqah16X-TeAKr5mAAMZsMci8Zs140.png"}),e(),q,I,H,f,v,i(a,{alt:"",src:"https://s0.lgstatic.com/i/image3/M01/03/4A/CgoCgV6X-TiABS7ZAAMqlyk1mEg118.png"}),e(),M,i(a,{alt:"",src:"https://s0.lgstatic.com/i/image3/M01/89/8F/Cgq2xl6X-TiAfMBxAASAApv99no139.png"}),e(),S])}const j=_(n,[["render",N]]);export{D as __pageData,j as default};
