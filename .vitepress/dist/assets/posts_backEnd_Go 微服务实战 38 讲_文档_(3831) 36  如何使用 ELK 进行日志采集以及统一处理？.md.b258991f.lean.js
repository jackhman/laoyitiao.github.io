import{_ as p,j as t,o as e,g as c,k as l,h as a,s,Q as o}from"./chunks/framework.4e7d56ce.js";const $=JSON.parse('{"title":"36如何使用ELK进行日志采集以及统一处理？","description":"","frontmatter":{},"headers":[],"relativePath":"posts/backEnd/Go 微服务实战 38 讲_文档/(3831) 36  如何使用 ELK 进行日志采集以及统一处理？.md","filePath":"posts/backEnd/Go 微服务实战 38 讲_文档/(3831) 36  如何使用 ELK 进行日志采集以及统一处理？.md","lastUpdated":1696682708000}'),r={name:"posts/backEnd/Go 微服务实战 38 讲_文档/(3831) 36  如何使用 ELK 进行日志采集以及统一处理？.md"},y=s("h1",{id:"_36如何使用elk进行日志采集以及统一处理",tabindex:"-1"},[a("36如何使用ELK进行日志采集以及统一处理？ "),s("a",{class:"header-anchor",href:"#_36如何使用elk进行日志采集以及统一处理","aria-label":'Permalink to "36如何使用ELK进行日志采集以及统一处理？"'},"​")],-1),E=s("p",null,'在前面的一系列课时，我们介绍了微服务各个组件的相关实践，从本课时开始我们将会介绍微服务日常开发的一些"利器"，这些工具会帮助我们构建更加健壮的微服务系统，并帮助排查解决微服务系统中的问题与性能瓶颈等。',-1),i=o("",9),F=o("",19),u=s("p",null,"elasticsearch-head 界面",-1),C=s("h4",{id:"logstash-的安装与使用",tabindex:"-1"},[a("Logstash 的安装与使用 "),s("a",{class:"header-anchor",href:"#logstash-的安装与使用","aria-label":'Permalink to "Logstash 的安装与使用"'},"​")],-1),g=s("p",null,"Logstash 是一个数据分析软件，主要用于分析 Log 日志。其工作原理如下所示：",-1),h=o("",21),d=o("",9),q=s("p",null,"ELKB 收集日志的流程图",-1),A=s("p",null,"Filebeat 监听应用的日志文件，随后将数据发送给 Logstash；Logstash 会对数据进行过滤和格式化，如 JSON 格式化，之后将处理好的日志数据发送给 Elasticsearch；Elasticsearch 存储并建立搜索的索引；Kibana 则会调用 Elasticsearch 的存储，为用户提供可视化的视图页面。",-1),B=s("p",null,"我们运行所有的组件之后，首先看下 elasticsearch-head 中的索引变化：",-1),D=s("p",null,"elasticsearch-head 中的索引界面",-1),b=s("p",null,[a("可以看到多了一个"),s("code",null,"filebeat-2020.10.12"),a("的索引，这说明 ELKB 分布式日志收集框架搭建成功。访问 "),s("a",{href:"http://localhost:9100",target:"_blank",rel:"noreferrer"},"http://localhost:9100"),a("，我们来具体看下索引中的具体数据：")],-1),_=s("p",null,"日志信息截图",-1),m=s("p",null,"从上面截图可以看到，/var/log/ 目录下的 mysqld.log 文件中产生了新的日志数据，这些数据非常多，我们在生产环境中需要根据实际的业务进行过滤，并处理相应的日志格式。",-1),f=s("p",null,"Kibana 日志界面",-1),k=s("p",null,[a("elasticsearch-head 仅仅是一个简单的 Elasticsearch 客户端，为了更加完整地统计和搜索需求，就需要借助于 Kibana，Kibana 具有很强大的分析能力。上面的 Kibana（访问 "),s("a",{href:"http://localhost:5601",target:"_blank",rel:"noreferrer"},"http://localhost:5601"),a("）运行截图展示了 Filebeat 监听到的 mysql 日志，图中可以看到这些日志信息。")],-1),v=s("p",null,"基于 Elasticsearch，Kibana 可以友好地展示海量日志的统计视图，并根据结果生成折线图、直方图和饼图等，这里就不一一展示了。",-1),I=s("h3",{id:"小结",tabindex:"-1"},[a("小结 "),s("a",{class:"header-anchor",href:"#小结","aria-label":'Permalink to "小结"'},"​")],-1),N=s("p",null,"本课时主要介绍了分布式日志采集系统 ELKB。日志主要用来记录离散的事件，包含程序执行到某一点或某一阶段的详细信息。ELKB 很好地解决了微服务架构下，服务实例众多且分散、日志难以收集和分析的问题。限于篇幅，本课时只介绍了 ELKB 的安装和使用，其实 Go 微服务中一般使用日志框架（如 logrus、zap 等），按照一定的格式将日志输出到指定的位置，这里就交给你自行构建一个微服务进行实践了。",-1),L=s("p",null,"在第 33 课时，我们讲解了使用分布式链路追踪组件来追踪分布式系统调用链路的问题，而本课时所讲的分布式日志框架也是用来解决分布式系统中发生的问题。关于二者的区别，以及使用的场景，你有什么经验和想法？欢迎你在留言区和我分享。",-1);function O(S,w,x,T,K,P){const n=t("Image");return e(),c("div",null,[y,E,l(n,{alt:"Drawing 0.png",src:"https://s0.lgstatic.com/i/image/M00/63/AB/Ciqc1F-WrqCAfyhyAAG2q-6nf6o454.png"}),a(),i,l(n,{alt:"Drawing 1.png",src:"https://s0.lgstatic.com/i/image/M00/63/B6/CgqCHl-Wrq-AE2cPAAMTezenVUk045.png"}),a(),F,l(n,{alt:"Drawing 2.png",src:"https://s0.lgstatic.com/i/image/M00/63/B6/CgqCHl-Wrt6AFxP1AA0vHSwXInE125.png"}),a(),u,C,g,l(n,{alt:"Drawing 3.png",src:"https://s0.lgstatic.com/i/image/M00/63/AB/Ciqc1F-WruaAULiSAABppBq55b8500.png"}),a(),h,l(n,{alt:"Drawing 4.png",src:"https://s0.lgstatic.com/i/image/M00/63/B6/CgqCHl-WrwmAbLLsAAEIOMM6eEI271.png"}),a(),d,l(n,{alt:"Go_微服务36_图（代替换）.png",src:"https://s0.lgstatic.com/i/image/M00/65/9A/Ciqc1F-bhKiASToRAAC-S76rRng777.png"}),a(),q,A,B,l(n,{alt:"Drawing 6.png",src:"https://s0.lgstatic.com/i/image/M00/63/AB/Ciqc1F-WryuAUHJAAAP7hK4sVTI416.png"}),a(),D,b,l(n,{alt:"Drawing 7.png",src:"https://s0.lgstatic.com/i/image/M00/63/AB/Ciqc1F-WrzWAHy_vABMEnUwlyUg879.png"}),a(),_,m,l(n,{alt:"Drawing 8.png",src:"https://s0.lgstatic.com/i/image/M00/63/B6/CgqCHl-Wrz2ACUhmAAsQ22P7Ts4988.png"}),a(),f,k,v,I,N,L])}const z=p(r,[["render",O]]);export{$ as __pageData,z as default};
