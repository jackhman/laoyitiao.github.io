import{_ as p,j as r,o,g as t,k as e,s,h as n,Q as l}from"./chunks/framework.4e7d56ce.js";const q=JSON.parse('{"title":"Server 核心实现 ","description":"","frontmatter":{},"headers":[],"relativePath":"posts/backEnd/098-讲带你搞懂 SkyWalking文档/(3369) 加餐2：请求接待员 —— Server 那些事.md","filePath":"posts/backEnd/098-讲带你搞懂 SkyWalking文档/(3369) 加餐2：请求接待员 —— Server 那些事.md","lastUpdated":1696417798000}'),c={name:"posts/backEnd/098-讲带你搞懂 SkyWalking文档/(3369) 加餐2：请求接待员 —— Server 那些事.md"},y=s("p",null,"我在介绍 SkyWalking Agent 核心原理时提到，用户可以在 agent.config 文件中的 collector.backend_service 配置项指定多个 OAP 服务的地址（逗号分隔），SkyWalking Agent 会切分该配置项，得到 OAP 服务列表，然后从其中随机选择一个 OAP 服务创建长连接，实现后续的数据上报。",-1),E=s("p",null,"在后端的 OAP 服务实例中，会启动一个 Server 来监听 Agent 发起的连接，本课时我们就来一起看看 Server 组件的具体实现。",-1),i=s("h4",{id:"server-核心实现",tabindex:"-1"},[n("Server 核心实现 "),s("a",{class:"header-anchor",href:"#server-核心实现","aria-label":'Permalink to "Server 核心实现"'},"​")],-1),d=s("p",null,"Server 接口以及实现类位于 server-library 模块下的 library-server 子模块中，如下图所示：",-1),v=s("p",null,"这里有两个核心接口： Server 接口和 ServerHandler 接口。Server 接口有 GRPCServer 和 JettyServer 两个实现类，如下图所示：",-1),g=l(`<ul><li><strong>GRPCServer</strong> 用于接收 SkyWalking Agent 发送的 gRPC 请求。正如前面课时介绍的那样， SkyWalking 6.x 中的 Trace 上报、JVM 监控上报、服务以及服务实例注册请求、心跳请求都是通过 gRPC 请求实现的。</li><li><strong>JettyServer</strong> 用于接收 SkyWalking Agent 以及用户的 Http 请求。在 SkyWalking 5.x 版本中，上述交互还可以通过 Http 请求完成。另外，用户从 SkyWalking Rocketbot 界面发起的请求，也是由 JettyServer 处理的。</li></ul><p>在 GRPCServer 实现中首先会根据配置初始化 NettyServerBuilder 对象（其中会指定服务监听的地址和端口，以及每个连接上的并发请求数等参数），然后创建并启动 io.grpc.Server 接收gRPC 请求。gRPC 的 Java 实现底层是依靠 Netty 实现的，Netty 是一个高性能的开源网络库，由于 Java 本身的 NIO API 使用起来比较麻烦，而 Netty 底层封装了 Java NIO 并对外提供了简单易用的 API，所以很多开源软件的网络模块都是使用 Netty 实现的。</p><p>下面是 GRPCServer 中最核心的代码，这里的 initialize() 方法和 start() 方法是在 Server 接口中定义的：</p><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#F97583;">public</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">void</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">initialize</span><span style="color:#E1E4E8;">() {</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#6A737D;">// 创建NettyServerBuilder，设置最大请求并发数、每个请求的最大长度等参数</span></span>
<span class="line"><span style="color:#E1E4E8;">    InetSocketAddress address </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">new</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">InetSocketAddress</span><span style="color:#E1E4E8;">(host, port);</span></span>
<span class="line"><span style="color:#E1E4E8;">    nettyServerBuilder </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> NettyServerBuilder.</span><span style="color:#B392F0;">forAddress</span><span style="color:#E1E4E8;">(address);</span></span>
<span class="line"><span style="color:#E1E4E8;">    nettyServerBuilder </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> nettyServerBuilder</span></span>
<span class="line"><span style="color:#E1E4E8;">     .</span><span style="color:#B392F0;">maxConcurrentCallsPerConnection</span><span style="color:#E1E4E8;">(maxConcurrentCallsPerConnection)</span></span>
<span class="line"><span style="color:#E1E4E8;">      .</span><span style="color:#B392F0;">maxMessageSize</span><span style="color:#E1E4E8;">(maxMessageSize);</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">public</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">void</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">start</span><span style="color:#E1E4E8;">() throws ServerException {</span></span>
<span class="line"><span style="color:#E1E4E8;">    server </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> nettyServerBuilder.</span><span style="color:#B392F0;">build</span><span style="color:#E1E4E8;">(); </span><span style="color:#6A737D;">// 创建并启动io.grpc.Server</span></span>
<span class="line"><span style="color:#E1E4E8;">    server.</span><span style="color:#B392F0;">start</span><span style="color:#E1E4E8;">();</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">public</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">void</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">initialize</span><span style="color:#24292E;">() {</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6A737D;">// 创建NettyServerBuilder，设置最大请求并发数、每个请求的最大长度等参数</span></span>
<span class="line"><span style="color:#24292E;">    InetSocketAddress address </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">new</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">InetSocketAddress</span><span style="color:#24292E;">(host, port);</span></span>
<span class="line"><span style="color:#24292E;">    nettyServerBuilder </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> NettyServerBuilder.</span><span style="color:#6F42C1;">forAddress</span><span style="color:#24292E;">(address);</span></span>
<span class="line"><span style="color:#24292E;">    nettyServerBuilder </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> nettyServerBuilder</span></span>
<span class="line"><span style="color:#24292E;">     .</span><span style="color:#6F42C1;">maxConcurrentCallsPerConnection</span><span style="color:#24292E;">(maxConcurrentCallsPerConnection)</span></span>
<span class="line"><span style="color:#24292E;">      .</span><span style="color:#6F42C1;">maxMessageSize</span><span style="color:#24292E;">(maxMessageSize);</span></span>
<span class="line"><span style="color:#24292E;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;">public</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">void</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">start</span><span style="color:#24292E;">() throws ServerException {</span></span>
<span class="line"><span style="color:#24292E;">    server </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> nettyServerBuilder.</span><span style="color:#6F42C1;">build</span><span style="color:#24292E;">(); </span><span style="color:#6A737D;">// 创建并启动io.grpc.Server</span></span>
<span class="line"><span style="color:#24292E;">    server.</span><span style="color:#6F42C1;">start</span><span style="color:#24292E;">();</span></span>
<span class="line"><span style="color:#24292E;">}</span></span></code></pre></div><p>接下来看 JettyServer 实现，它底层依赖 Jetty 实现对 Http 请求的处理。Jetty 是一个 Servlet 容器，它以 jar 包的方式发布，常被用作嵌入式的 Web 容器。JettyServer 的核心实现如下，这也是 Java 代码中直接启动 Jetty 实例的基本流程：</p><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#F97583;">public</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">void</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">initialize</span><span style="color:#E1E4E8;">() {</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#6A737D;">// 创建org.eclipse.jetty.server.Server对象</span></span>
<span class="line"><span style="color:#E1E4E8;">    server </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">new</span><span style="color:#E1E4E8;"> org.eclipse.jetty.server.</span><span style="color:#B392F0;">Server</span><span style="color:#E1E4E8;">(</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#F97583;">new</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">InetSocketAddress</span><span style="color:#E1E4E8;">(host, port));</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#6A737D;">// 创建ServletContextHandler对象，contextPath是其处理的路径</span></span>
<span class="line"><span style="color:#E1E4E8;">    servletContextHandler </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">new</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">ServletContextHandler</span><span style="color:#E1E4E8;">(NO_SESSIONS);</span></span>
<span class="line"><span style="color:#E1E4E8;">    servletContextHandler.</span><span style="color:#B392F0;">setContextPath</span><span style="color:#E1E4E8;">(contextPath);</span></span>
<span class="line"><span style="color:#E1E4E8;">    server.</span><span style="color:#B392F0;">setHandler</span><span style="color:#E1E4E8;">(servletContextHandler);</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">public</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">void</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">start</span><span style="color:#E1E4E8;">() throws ServerException {</span></span>
<span class="line"><span style="color:#E1E4E8;">    server.</span><span style="color:#B392F0;">start</span><span style="color:#E1E4E8;">();</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">public</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">void</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">initialize</span><span style="color:#24292E;">() {</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6A737D;">// 创建org.eclipse.jetty.server.Server对象</span></span>
<span class="line"><span style="color:#24292E;">    server </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">new</span><span style="color:#24292E;"> org.eclipse.jetty.server.</span><span style="color:#6F42C1;">Server</span><span style="color:#24292E;">(</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#D73A49;">new</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">InetSocketAddress</span><span style="color:#24292E;">(host, port));</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6A737D;">// 创建ServletContextHandler对象，contextPath是其处理的路径</span></span>
<span class="line"><span style="color:#24292E;">    servletContextHandler </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">new</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">ServletContextHandler</span><span style="color:#24292E;">(NO_SESSIONS);</span></span>
<span class="line"><span style="color:#24292E;">    servletContextHandler.</span><span style="color:#6F42C1;">setContextPath</span><span style="color:#24292E;">(contextPath);</span></span>
<span class="line"><span style="color:#24292E;">    server.</span><span style="color:#6F42C1;">setHandler</span><span style="color:#24292E;">(servletContextHandler);</span></span>
<span class="line"><span style="color:#24292E;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;">public</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">void</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">start</span><span style="color:#24292E;">() throws ServerException {</span></span>
<span class="line"><span style="color:#24292E;">    server.</span><span style="color:#6F42C1;">start</span><span style="color:#24292E;">();</span></span>
<span class="line"><span style="color:#24292E;">}</span></span></code></pre></div><p>最后，无论是 GRPCServer 处理 gRPC 请求的逻辑，还是 JettyServer 处理 Http 请求的逻辑，都是封装在了 ServerHandler 实现之中的。我们可以通过两者的 addHandler() 方法，为指定请求添加相应的 ServerHandler 实现。</p><p>例如，前面介绍的 Agent 上报 Trace 的 gRPC 请求，是由 TraceSegmentReportServiceHandler 这个 GRPCHandler 进行处理的，它继承了 PB 生成的服务端辅助类，也同时实现了 GRPCHandler 接口，如下图所示。这里的 ServerHandler 接口和 GRPCHandler 接口中没有定义任何方法，只是一个标识而已。</p>`,8),S=s("p",null,"通过下图我们可以看出， SkyWalking Agent 发出的每种 gRPC 请求，都有一个对应的 GRPCHandler 实现，这些实现同时也继承了 PB 生成的服务端辅助类，实现了 BindableService接口。",-1),C=s("p",null,"在后面介绍 OAP 中其他上层模块时会看到，在启动时都会将对应的 GRPCHandler 实现（也是 BindableServer 实现）添加到 GRPCServer 上。这样，GRPCServer 在收到 gRPC 请求时才能找到相应的处理模块，这些 GRPCHandler 实现（BindableServer 实现）即为相应上层模块入口。",-1),h=s("p",null,"JettyServer 也是类似的，在后面介绍 SkyWalking Rocketbot 查询请求的相关模块时会看到，前端的请求是通过 GraphQL​QueryHandler 进行处理的，它本身是个 HttpServlet 实现，同时实现了 ServerHandler 接口，如下图所示。",-1),A=s("p",null,"在低版本中，SkyWalking Agent 与后端 OAP 的交互还可以通过 Http 请求完成，每种类型的请求都对应一个 JettyHandler 实现，如下图所示。",-1),u=s("p",null,"如果 OAP 中的一个模块需要处理 Http 请求，就需要提供一个 JettyHandler 实现并注册到 JettyServer 中。",-1),P=s("h4",{id:"相关-service-实现",tabindex:"-1"},[n("相关 Service 实现 "),s("a",{class:"header-anchor",href:"#相关-service-实现","aria-label":'Permalink to "相关 Service 实现"'},"​")],-1),F=s("p",null,"通过上一节的介绍我们知道，library-server 是一个相对独立的模块，没有绑定任何 SkyWalking 中的概念，所以它是可以单独打成 jar 包给其他应用使用的（前面介绍的 DataCarrier 模块也是如此）。",-1),R=s("p",null,"OAP 其他模块在使用 library-server 模块提供的 Server 组件时，需要对其进行一层封装，如下图所示：",-1),H=s("p",null,"OAP 的 server-core 模块中定义了一个 GRPCHandlerRegister 接口，其实现中封装了一个 GRPCServer，并继承了 Service 接口，这样就将 library-server 模块引入到 OAP 的体系中，server-core 模块同样也为 JettyServer 进行了相应的封装，如下图所示：",-1),k=l(`<p>最后，这里的 GRPCHandlerRegister、JettyHandlerRegister 接口只会对外暴露底层 Server 的 addHandler() 方法，并没有暴露其他任何方法。</p><h4 id="server-启动流程" tabindex="-1">Server 启动流程 <a class="header-anchor" href="#server-启动流程" aria-label="Permalink to &quot;Server 启动流程&quot;">​</a></h4><p>了解了 Server 的核心实现以及 server-core 模块如何将 Server 组件引入到 OAP 体系之后，我们再来介绍一下 OAP 是如何初始化 Server 组件的。</p><p>server-core 模块是 SkyWalking OAP 中的核心模块，其中会初始化很多核心 Module、ModuleProvider 以及 Service。在 server-core 模块中的 ModuleDefine SPI 配置文件中指定了多个 ModuleDefine 实现，如下所示：</p><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">org.apache.skywalking.oap.server.core.storage.StorageModule</span></span>
<span class="line"><span style="color:#E1E4E8;">org.apache.skywalking.oap.server.core.cluster.ClusterModule</span></span>
<span class="line"><span style="color:#E1E4E8;">org.apache.skywalking.oap.server.core.CoreModule</span></span>
<span class="line"><span style="color:#E1E4E8;">org.apache.skywalking.oap.server.core.query.QueryModule</span></span>
<span class="line"><span style="color:#E1E4E8;">org.apache.skywalking.oap.server.core.alarm.AlarmModule</span></span>
<span class="line"><span style="color:#E1E4E8;">org.apache.skywalking.oap.server.core.exporter.ExporterModule</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">org.apache.skywalking.oap.server.core.storage.StorageModule</span></span>
<span class="line"><span style="color:#24292E;">org.apache.skywalking.oap.server.core.cluster.ClusterModule</span></span>
<span class="line"><span style="color:#24292E;">org.apache.skywalking.oap.server.core.CoreModule</span></span>
<span class="line"><span style="color:#24292E;">org.apache.skywalking.oap.server.core.query.QueryModule</span></span>
<span class="line"><span style="color:#24292E;">org.apache.skywalking.oap.server.core.alarm.AlarmModule</span></span>
<span class="line"><span style="color:#24292E;">org.apache.skywalking.oap.server.core.exporter.ExporterModule</span></span></code></pre></div><p>可以看到前文分析 ClusterModule 是在 server-core 模块初始化的时候被加载的。通过这些 ModuleDefine 的名称，我们可以大致推测出其他的 Module 的核心功能，例如，StorageModule 负责实现 OAP 底层存储相关的功能，QueryModule 负责实现查询相关的功能，AlarmModule 负责实现告警功能。这些 Module 的具体实现在后面会逐个展开分析。</p><p>这里重点来看 CoreModule ，在其 services() 方法返回的 Service 数组中，包含了 GRPCHandlerRegister、JettyHandlerRegister 两个 Service 接口，相关代码片段如下：</p><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#F97583;">public</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">Class</span><span style="color:#E1E4E8;">[] </span><span style="color:#B392F0;">services</span><span style="color:#E1E4E8;">() {</span></span>
<span class="line"><span style="color:#E1E4E8;">    List&lt;</span><span style="color:#F97583;">Class</span><span style="color:#E1E4E8;">&gt; classes </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">new</span><span style="color:#E1E4E8;"> ArrayList&lt;&gt;();</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#B392F0;">addServerInterface</span><span style="color:#E1E4E8;">(classes);</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#6A737D;">// 省略向classes集合中添加其他Service接口的代码</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">return</span><span style="color:#E1E4E8;"> classes.</span><span style="color:#B392F0;">toArray</span><span style="color:#E1E4E8;">(</span><span style="color:#F97583;">new</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">Class</span><span style="color:#E1E4E8;">[] {});</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span>
<span class="line"><span style="color:#F97583;">private</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">void</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">addServerInterface</span><span style="color:#E1E4E8;">(List</span><span style="color:#F97583;">&lt;</span><span style="color:#E1E4E8;">Class</span><span style="color:#F97583;">&gt;</span><span style="color:#E1E4E8;"> classes) {</span></span>
<span class="line"><span style="color:#E1E4E8;">    classes.</span><span style="color:#B392F0;">add</span><span style="color:#E1E4E8;">(GRPCHandlerRegister.class);</span></span>
<span class="line"><span style="color:#E1E4E8;">    classes.</span><span style="color:#B392F0;">add</span><span style="color:#E1E4E8;">(JettyHandlerRegister.class);</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">public</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">Class</span><span style="color:#24292E;">[] </span><span style="color:#6F42C1;">services</span><span style="color:#24292E;">() {</span></span>
<span class="line"><span style="color:#24292E;">    List&lt;</span><span style="color:#D73A49;">Class</span><span style="color:#24292E;">&gt; classes </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">new</span><span style="color:#24292E;"> ArrayList&lt;&gt;();</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6F42C1;">addServerInterface</span><span style="color:#24292E;">(classes);</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6A737D;">// 省略向classes集合中添加其他Service接口的代码</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">return</span><span style="color:#24292E;"> classes.</span><span style="color:#6F42C1;">toArray</span><span style="color:#24292E;">(</span><span style="color:#D73A49;">new</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">Class</span><span style="color:#24292E;">[] {});</span></span>
<span class="line"><span style="color:#24292E;">}</span></span>
<span class="line"><span style="color:#D73A49;">private</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">void</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">addServerInterface</span><span style="color:#24292E;">(List</span><span style="color:#D73A49;">&lt;</span><span style="color:#24292E;">Class</span><span style="color:#D73A49;">&gt;</span><span style="color:#24292E;"> classes) {</span></span>
<span class="line"><span style="color:#24292E;">    classes.</span><span style="color:#6F42C1;">add</span><span style="color:#24292E;">(GRPCHandlerRegister.class);</span></span>
<span class="line"><span style="color:#24292E;">    classes.</span><span style="color:#6F42C1;">add</span><span style="color:#24292E;">(JettyHandlerRegister.class);</span></span>
<span class="line"><span style="color:#24292E;">}</span></span></code></pre></div><p>也就是说其 ModuleProvider 必须提供这两个 Service 的相关实现。在 server-core 模块的 ModuleProvider SPI 文件中配置了 CoreModuleProvider 这个实现类，在其 prepare() 方法中会创建前文介绍的 GRPCServer 以及 JettyServer 实例并完成底层的初始化操作：</p><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#F97583;">public</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">void</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">prepare</span><span style="color:#E1E4E8;">()  {</span></span>
<span class="line"><span style="color:#E1E4E8;">    grpcServer </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">new</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">GRPCServer</span><span style="color:#E1E4E8;">(...); </span><span style="color:#6A737D;">// 创建并初始化GRPCServer</span></span>
<span class="line"><span style="color:#E1E4E8;">    ... </span><span style="color:#6A737D;">// 省略设置GRPServer的代码</span></span>
<span class="line"><span style="color:#E1E4E8;">    grpcServer.</span><span style="color:#B392F0;">initialize</span><span style="color:#E1E4E8;">();</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#6A737D;">// 创建并初始化 JettyServer</span></span>
<span class="line"><span style="color:#E1E4E8;">    jettyServer </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">new</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">JettyServer</span><span style="color:#E1E4E8;">(...); </span><span style="color:#6A737D;">// 省略相关配置</span></span>
<span class="line"><span style="color:#E1E4E8;">    jettyServer.</span><span style="color:#B392F0;">initialize</span><span style="color:#E1E4E8;">();</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#6A737D;">// GRPCServer封装成到GRPCHandlerRegisterImpl之中，然后注册成</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#6A737D;">// GRPCHandlerRegister这个Service的实现</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#79B8FF;">this</span><span style="color:#E1E4E8;">.</span><span style="color:#B392F0;">registerServiceImplementation</span><span style="color:#E1E4E8;">(GRPCHandlerRegister.class, </span></span>
<span class="line"><span style="color:#E1E4E8;">          </span><span style="color:#F97583;">new</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">GRPCHandlerRegisterImpl</span><span style="color:#E1E4E8;">(grpcServer));</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#6A737D;">// JettyServer封装成到JettyHandlerRegisterImpl之中，然后注册成</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#6A737D;">// JettyHandlerRegister这个Service的实现</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#79B8FF;">this</span><span style="color:#E1E4E8;">.</span><span style="color:#B392F0;">registerServiceImplementation</span><span style="color:#E1E4E8;">(JettyHandlerRegister.class, </span></span>
<span class="line"><span style="color:#E1E4E8;">          </span><span style="color:#F97583;">new</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">JettyHandlerRegisterImpl</span><span style="color:#E1E4E8;">(jettyServer));</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">public</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">void</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">prepare</span><span style="color:#24292E;">()  {</span></span>
<span class="line"><span style="color:#24292E;">    grpcServer </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">new</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">GRPCServer</span><span style="color:#24292E;">(...); </span><span style="color:#6A737D;">// 创建并初始化GRPCServer</span></span>
<span class="line"><span style="color:#24292E;">    ... </span><span style="color:#6A737D;">// 省略设置GRPServer的代码</span></span>
<span class="line"><span style="color:#24292E;">    grpcServer.</span><span style="color:#6F42C1;">initialize</span><span style="color:#24292E;">();</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6A737D;">// 创建并初始化 JettyServer</span></span>
<span class="line"><span style="color:#24292E;">    jettyServer </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">new</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">JettyServer</span><span style="color:#24292E;">(...); </span><span style="color:#6A737D;">// 省略相关配置</span></span>
<span class="line"><span style="color:#24292E;">    jettyServer.</span><span style="color:#6F42C1;">initialize</span><span style="color:#24292E;">();</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6A737D;">// GRPCServer封装成到GRPCHandlerRegisterImpl之中，然后注册成</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6A737D;">// GRPCHandlerRegister这个Service的实现</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#005CC5;">this</span><span style="color:#24292E;">.</span><span style="color:#6F42C1;">registerServiceImplementation</span><span style="color:#24292E;">(GRPCHandlerRegister.class, </span></span>
<span class="line"><span style="color:#24292E;">          </span><span style="color:#D73A49;">new</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">GRPCHandlerRegisterImpl</span><span style="color:#24292E;">(grpcServer));</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6A737D;">// JettyServer封装成到JettyHandlerRegisterImpl之中，然后注册成</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6A737D;">// JettyHandlerRegister这个Service的实现</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#005CC5;">this</span><span style="color:#24292E;">.</span><span style="color:#6F42C1;">registerServiceImplementation</span><span style="color:#24292E;">(JettyHandlerRegister.class, </span></span>
<span class="line"><span style="color:#24292E;">          </span><span style="color:#D73A49;">new</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">JettyHandlerRegisterImpl</span><span style="color:#24292E;">(jettyServer));</span></span>
<span class="line"><span style="color:#24292E;">}</span></span></code></pre></div><p>通过前文对 BootstrapFlow 的介绍可知，在 prepare() 方法完成之后，会调用 ModuleProvider 的 start() 方法，CoreModuleProvider 会在其实现中为 GRPCServer 添加两个基础的 GRPCHandler 实现：</p><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#F97583;">public</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">void</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">start</span><span style="color:#E1E4E8;">() throws ModuleStartException {</span></span>
<span class="line"><span style="color:#E1E4E8;">    grpcServer.</span><span style="color:#B392F0;">addHandler</span><span style="color:#E1E4E8;">(</span><span style="color:#F97583;">new</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">RemoteServiceHandler</span><span style="color:#E1E4E8;">(</span><span style="color:#B392F0;">getManager</span><span style="color:#E1E4E8;">()));</span></span>
<span class="line"><span style="color:#E1E4E8;">    grpcServer.</span><span style="color:#B392F0;">addHandler</span><span style="color:#E1E4E8;">(</span><span style="color:#F97583;">new</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">HealthCheckServiceHandler</span><span style="color:#E1E4E8;">());</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">public</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">void</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">start</span><span style="color:#24292E;">() throws ModuleStartException {</span></span>
<span class="line"><span style="color:#24292E;">    grpcServer.</span><span style="color:#6F42C1;">addHandler</span><span style="color:#24292E;">(</span><span style="color:#D73A49;">new</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">RemoteServiceHandler</span><span style="color:#24292E;">(</span><span style="color:#6F42C1;">getManager</span><span style="color:#24292E;">()));</span></span>
<span class="line"><span style="color:#24292E;">    grpcServer.</span><span style="color:#6F42C1;">addHandler</span><span style="color:#24292E;">(</span><span style="color:#D73A49;">new</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">HealthCheckServiceHandler</span><span style="color:#24292E;">());</span></span>
<span class="line"><span style="color:#24292E;">}</span></span></code></pre></div><p>这里简单介绍一下这两个 GRPCHandler 的功能：</p><ul><li><strong>HealthCheckServiceHandler</strong>：在 Cluster 模块中提供了支持多种第三方服务发展组件的实现，前文介绍的 cluster-zookeeper-plugin 模块使用的 curator-x-discovery 扩展库底层是依赖 Zookeeper 的 Watcher 来监听一个 OAP 服务实例是否可用。但是有的第三方服务发现组件（例如 Consul）会依靠定期健康检查（Health Check）来检查一个 OAP 服务实例是否可用，此时 OAP 就需要保留一个接口来处理健康检查请求，这就是 HealthCheckServiceHandler 的核心功能。对 Consul 感兴趣的同学，可以参考下面两篇文档：</li></ul><blockquote><p><a href="https://www.consul.io/docs/agent/checks.html" target="_blank" rel="noreferrer">https://www.consul.io/docs/agent/checks.html</a></p><p><a href="https://github.com/grpc/grpc/blob/master/doc/health-checking.md" target="_blank" rel="noreferrer">https://github.com/grpc/grpc/blob/master/doc/health-checking.md</a></p></blockquote><ul><li><strong>RemoteServiceHandler</strong>：OAP 集群中各个 OAP 实例节点之间通信的接口，在后面会详细介绍该 GRPCHandler 的实现以及通信方式。</li></ul><p>CoreModuleProvider 中并没有为 JettyServer 添加任何 JettyHandler 实现，在后续分析其他 ModuleProvider 的 start() 方法时，会看到向 JettyServer 添加 JettyHandler 的行为。</p><p>最后，在全部 ModuleProvider 初始化结束之后，BootstrapFlow 会通过 notifyAfterCompleted() 方法通知所有 ModuleProvider 开始对外提供服务，在 CoreModuleProvider 的实现中，其 notifyAfterCompleted() 方法会调用 GRPCServer 和 JettyServer 的start() 方法，启动这两个 Server 。至此，OAP 服务中的 GRPCServer 和 JettyServer 实例启动完毕了。</p><h4 id="sharing-server-plugin-中的-server-实例" tabindex="-1">sharing-server-plugin 中的 Server 实例 <a class="header-anchor" href="#sharing-server-plugin-中的-server-实例" aria-label="Permalink to &quot;sharing-server-plugin 中的 Server 实例&quot;">​</a></h4><p>SkyWalking OAP 需要接收外部请求的地方还是挺多的，例如 Agent 上报的监控数据、 SkyWalking Rocketbot 的查询请求、OAP 集群中节点之间的相互通信，等等。除了 CoreModuleProvider 中会启动 Server 组件之外，sharing-server-plugin 模块中也可以启动单独的一套 Server 实例，并监听独立的端口，这套 Server 实例主要用来接收 Agent 的注册请求、上报的 JVM 监控数据以及 Trace 数据。</p><p>与 CoreModule 相同，SharingServerModule（sharing-server-plugin 模块的 Module 实现类）的 services() 方法指明了 SharingServerModuleProvider （sharing-server-plugin 模块的 ModuleProvider 实现类）必须提供 GRPCHandlerRegister 和 JettyHandlerRegister 两个接口的实例。</p><p>在 SharingServerModuleProvider 的 prepare() 方法中，会根据配置信息决定是否启动新的 Server 组件，核心代码片段如下：</p><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#F97583;">public</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">void</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">prepare</span><span style="color:#E1E4E8;">() {</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">if</span><span style="color:#E1E4E8;"> (config.</span><span style="color:#B392F0;">getGRPCPort</span><span style="color:#E1E4E8;">() </span><span style="color:#F97583;">!=</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">0</span><span style="color:#E1E4E8;">){ </span><span style="color:#6A737D;">// 配置了独立端口，则启动独立GRPCServer</span></span>
<span class="line"><span style="color:#E1E4E8;">        grpcServer </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">new</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">GRPCServer</span><span style="color:#E1E4E8;">(...);</span></span>
<span class="line"><span style="color:#E1E4E8;">        grpcServer.</span><span style="color:#B392F0;">initialize</span><span style="color:#E1E4E8;">();</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#6A737D;">// GRPCServer封装成到GRPCHandlerRegisterImpl之中，然后注册成</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#6A737D;">// GRPCHandlerRegister这个Service的实现，与CoreModuleProvider相同</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#79B8FF;">this</span><span style="color:#E1E4E8;">.</span><span style="color:#B392F0;">registerServiceImplementation</span><span style="color:#E1E4E8;">(GRPCHandlerRegister.class,</span></span>
<span class="line"><span style="color:#E1E4E8;">           </span><span style="color:#F97583;">new</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">GRPCHandlerRegisterImpl</span><span style="color:#E1E4E8;">(grpcServer));</span></span>
<span class="line"><span style="color:#E1E4E8;">    } </span><span style="color:#F97583;">else</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#6A737D;">// 未指定独立GRPCServer的端口，则与CoreModule共用一个GRPCServer实例</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#79B8FF;">this</span><span style="color:#E1E4E8;">.receiverGRPCHandlerRegister </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span></span>
<span class="line"><span style="color:#E1E4E8;">            </span><span style="color:#F97583;">new</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">ReceiverGRPCHandlerRegister</span><span style="color:#E1E4E8;">();</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#79B8FF;">this</span><span style="color:#E1E4E8;">.</span><span style="color:#B392F0;">registerServiceImplementation</span><span style="color:#E1E4E8;">(GRPCHandlerRegister.class, </span></span>
<span class="line"><span style="color:#E1E4E8;">          receiverGRPCHandlerRegister);</span></span>
<span class="line"><span style="color:#E1E4E8;">    }</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#6A737D;">// 对JettyServer的处理相同，不再展开</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">public</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">void</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">prepare</span><span style="color:#24292E;">() {</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">if</span><span style="color:#24292E;"> (config.</span><span style="color:#6F42C1;">getGRPCPort</span><span style="color:#24292E;">() </span><span style="color:#D73A49;">!=</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">0</span><span style="color:#24292E;">){ </span><span style="color:#6A737D;">// 配置了独立端口，则启动独立GRPCServer</span></span>
<span class="line"><span style="color:#24292E;">        grpcServer </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">new</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">GRPCServer</span><span style="color:#24292E;">(...);</span></span>
<span class="line"><span style="color:#24292E;">        grpcServer.</span><span style="color:#6F42C1;">initialize</span><span style="color:#24292E;">();</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#6A737D;">// GRPCServer封装成到GRPCHandlerRegisterImpl之中，然后注册成</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#6A737D;">// GRPCHandlerRegister这个Service的实现，与CoreModuleProvider相同</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#005CC5;">this</span><span style="color:#24292E;">.</span><span style="color:#6F42C1;">registerServiceImplementation</span><span style="color:#24292E;">(GRPCHandlerRegister.class,</span></span>
<span class="line"><span style="color:#24292E;">           </span><span style="color:#D73A49;">new</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">GRPCHandlerRegisterImpl</span><span style="color:#24292E;">(grpcServer));</span></span>
<span class="line"><span style="color:#24292E;">    } </span><span style="color:#D73A49;">else</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#6A737D;">// 未指定独立GRPCServer的端口，则与CoreModule共用一个GRPCServer实例</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#005CC5;">this</span><span style="color:#24292E;">.receiverGRPCHandlerRegister </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span></span>
<span class="line"><span style="color:#24292E;">            </span><span style="color:#D73A49;">new</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">ReceiverGRPCHandlerRegister</span><span style="color:#24292E;">();</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#005CC5;">this</span><span style="color:#24292E;">.</span><span style="color:#6F42C1;">registerServiceImplementation</span><span style="color:#24292E;">(GRPCHandlerRegister.class, </span></span>
<span class="line"><span style="color:#24292E;">          receiverGRPCHandlerRegister);</span></span>
<span class="line"><span style="color:#24292E;">    }</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6A737D;">// 对JettyServer的处理相同，不再展开</span></span>
<span class="line"><span style="color:#24292E;">}</span></span></code></pre></div><p>可见，在未指定独立端口的时候，sharing-server-plugin 模块并没有启动新 Server，而是和 server-core 模块共用一套 Server 实例，这里的 ReceiverGRPCHandlerRegister 就是对 GRPCHandlerRegister 的封装，如下图所示，添加的 GRPCHandler 也都会添加到同一个 GRPCServer 实例上：</p>`,24),m=s("p",null,"如果使用了独立的 Server 实例，则与 CoreModuleProvider 相同，会在SharingServerModuleProvider 的 notifyAfterCompleted() 方法中启动，代码不再重复。",-1),_=s("h4",{id:"server-的相关配置",tabindex:"-1"},[n("Server 的相关配置 "),s("a",{class:"header-anchor",href:"#server-的相关配置","aria-label":'Permalink to "Server 的相关配置"'},"​")],-1),D=s("p",null,"本课时最后，看一下 application.yml 中与 Server 相关的配置项。下图展示了 CoreModuleProvider 中启动的 Server 实例的配置以及 CoreModuleConfig 中的对应字段。 restHost、restPort、restContextPath 是 JettyServer 监听的 host 地址、端口号以及处理的 URL Path，gRPCHost、gRPCPort 是 GRPCServer 监听的 host 地址和端口号。maxConcurrentCallsPerConnection、maxMessageSize 是 GRPCServer 中单个连接的最大请求数以及单个消息的最大长度。",-1),G=s("p",null,"下图展示了 SharingServerModuleProvider 中启动的 Server 实例的配置以及 SharingServerConfig 中的对应字段，具体含义与 server-core 模块相同，不再重复。",-1),b=s("h4",{id:"总结",tabindex:"-1"},[n("总结 "),s("a",{class:"header-anchor",href:"#总结","aria-label":'Permalink to "总结"'},"​")],-1),B=s("p",null,"本课时深入介绍了 OAP 中接收 gRPC 请求的 GRPCServer 组件以及接收 Http 请求的 JettyServer 组件，分析了 server-core 模块如何对 library-server 模块的 Server 进行封装并引入到 OAP 体系。然后剖析了 OAP 在初始化流程中启动 Server 组件的核心流程（其中包括 server-core 以及 sharing-server-plugin 模块中的两组 Server），还介绍了这两组 Server 实例对应的配置信息。",-1);function M(w,J,x,I,f,O){const a=r("Image");return o(),t("div",null,[y,E,i,d,e(a,{alt:"image (4).png",src:"https://s0.lgstatic.com/i/image/M00/0E/A9/CgqCHl7GH8qAYLAAAAB7Hh0Zq6U618.png"}),v,e(a,{alt:"Server继承关系.png",src:"https://s0.lgstatic.com/i/image/M00/0E/9D/Ciqc1F7GH9GAf3gRAAAeem8rA0s935.png"}),g,e(a,{alt:"image (5).png",src:"https://s0.lgstatic.com/i/image/M00/0E/9D/Ciqc1F7GH9yAJDw0AADhn-9G47E874.png"}),S,e(a,{alt:"image (6).png",src:"https://s0.lgstatic.com/i/image/M00/0E/A9/CgqCHl7GH-SAfec0AAHpmMYGuCk769.png"}),C,h,e(a,{alt:"GraphQLQueryHandler.png",src:"https://s0.lgstatic.com/i/image/M00/0E/A9/CgqCHl7GH-2AT3uCAADSyb16jy0664.png"}),A,e(a,{alt:"JettyHandler.png",src:"https://s0.lgstatic.com/i/image/M00/0E/A9/CgqCHl7GH_SALGuQAAI7EvvVlKg105.png"}),u,P,F,R,e(a,{alt:"image (7).png",src:"https://s0.lgstatic.com/i/image/M00/0E/9E/Ciqc1F7GH_2AY1ESAAA-AcXju3w625.png"}),H,e(a,{alt:"image (8).png",src:"https://s0.lgstatic.com/i/image/M00/0E/A9/CgqCHl7GIASAZhbOAAA_KXoo8XI235.png"}),k,e(a,{alt:"image (9).png",src:"https://s0.lgstatic.com/i/image/M00/0E/A9/CgqCHl7GIBaARC57AAJ11UYHvq8272.png"}),m,_,D,e(a,{alt:"image (10).png",src:"https://s0.lgstatic.com/i/image/M00/0E/9E/Ciqc1F7GIB6ANSDJABPfQZGq5oU867.png"}),G,e(a,{alt:"image (11).png",src:"https://s0.lgstatic.com/i/image/M00/0E/A9/CgqCHl7GICWAd2pVAA4OF-xGTK0682.png"}),b,B])}const N=p(c,[["render",M]]);export{q as __pageData,N as default};
