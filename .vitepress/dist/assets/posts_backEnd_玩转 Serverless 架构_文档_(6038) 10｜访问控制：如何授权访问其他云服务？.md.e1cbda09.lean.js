import{_ as o,j as e,o as c,h as t,k as l,f as n,Q as p,s}from"./chunks/framework.d3daa342.js";const P=JSON.parse('{"title":"10｜访问控制：如何授权访问其他云服务？","description":"","frontmatter":{},"headers":[],"relativePath":"posts/backEnd/玩转 Serverless 架构_文档/(6038) 10｜访问控制：如何授权访问其他云服务？.md","filePath":"posts/backEnd/玩转 Serverless 架构_文档/(6038) 10｜访问控制：如何授权访问其他云服务？.md","lastUpdated":1696682708000}'),r={name:"posts/backEnd/玩转 Serverless 架构_文档/(6038) 10｜访问控制：如何授权访问其他云服务？.md"},E=p("",16),y=p("",11),i=p("",14),u=p("",8),F=s("p",null,"使用日志服务存储函数日志",-1),A=s("p",null,"首先我们需要创建一个角色 RoleForServerlessApp，角色可信实体为阿里云服务，受信服务选择函数计算，这样函数计算就可以扮演 RoleForServerlessApp 这个角色了。",-1),q=s("p",null,"创建角色",-1),d=s("p",null,"接下来还需要给 RoleForServerlessApp 这个角色添加 AliyunLogFullAccess 权限，这样扮演 RoleForServerlessApp 这个角色的用户就能够访问你的日志服务了。",-1),g=s("p",null,"下面是 RoleForServerlessApp 角色的截图，其中 ARN（Aliyun Resource Name） 是角色的唯一标志，角色扮演的时候就会使用到 ARN。",-1),C=s("p",null,[n("角色创建完成后，我们就可以为函数计算的 serverless-app 服务设置 RoleForServerlessApp 这个角色，这样服务下的所有函数都可以通过扮演 serverless-app 角色来写日志了。"),s("strong",null,"那角色到底是怎么扮演的呢？别急，让我们来看第三个场景。")],-1),S=s("h4",{id:"在-a-账号的函数中访问-b-账号的-oss-文件",tabindex:"-1"},[n("在 A 账号的函数中访问 B 账号的 OSS 文件 "),s("a",{class:"header-anchor",href:"#在-a-账号的函数中访问-b-账号的-oss-文件","aria-label":'Permalink to "在 A 账号的函数中访问 B 账号的 OSS 文件"'},"​")],-1),D=s("p",null,"通过前面的学习，你已经知道了可以通过角色扮演来实现第三个场景（这种场景常见于有多个账号的大型企业中，了解该场景的实现，可以让你跟深入理解角色扮演。）那具体怎么实现呢？这个过程可能要比你想象的要复杂，但了解其原理后可以帮你更深入理解访问控制。",-1),_=s("p",null,"首先你要为账号 A 中函数计算的角色授予角色扮演的权限，也就是需要为前面的 RoleForServerlessApp 再增加一个 AliyunSTSAssumeRoleAccess 的权限，这样函数实例才能进行角色扮演。",-1),B=s("p",null,"然后你需要在账号 B 中创建一个 RoleForAccountA 的角色，角色可信实体是账号 A，其策略是 OSS 的读权限，这样账号 A 就可以通过扮演 RoleForAccountA 这个角色来读取账号 B 的 OSS。",-1),h=s("p",null,"账号 A 的角色 RoleForServerlessApp",-1),m=s("p",null,"在账号 B 中创建角色",-1),v=s("p",null,"角色和权限都配置完成后，让我们来看看实际的工作流程：",-1),k=p("",11);function K(T,f,R,b,I,O){const a=e("Image");return c(),t("div",null,[E,l(a,{alt:"Drawing 0.png",src:"https://s0.lgstatic.com/i/image/M00/8E/A1/Ciqc1GAFQTWAdNesAAIaiyBrqHo915.png"}),n(),y,l(a,{alt:"image.png",src:"https://s0.lgstatic.com/i/image6/M01/02/F6/CioPOWAeTqOAV4b9AAFxVLJm8XE167.png"}),n(),i,l(a,{alt:"Drawing 2.png",src:"https://s0.lgstatic.com/i/image2/M01/06/8D/Cip5yGAFQXWAJLgBAADLAQTzd_U077.png"}),n(),u,l(a,{alt:"image (1).png",src:"https://s0.lgstatic.com/i/image6/M01/02/F8/Cgp9HWAeTo6AWtGYAAEi1nLxnUc273.png"}),n(),F,A,l(a,{alt:"Drawing 4.png",src:"https://s0.lgstatic.com/i/image2/M01/06/8F/CgpVE2AFQYiAMPCXAAEDoFE5MYw462.png"}),n(),q,d,g,l(a,{alt:"image (2).png",src:"https://s0.lgstatic.com/i/image6/M01/02/F6/CioPOWAeTr-ADUpjAAGKRqfx8Hs648.png"}),n(),C,S,D,_,B,l(a,{alt:"image (3).png",src:"https://s0.lgstatic.com/i/image6/M01/02/F8/Cgp9HWAeTtSAQdceAAGOxN8jVK4248.png"}),n(),h,l(a,{alt:"image (4).png",src:"https://s0.lgstatic.com/i/image6/M01/02/F8/Cgp9HWAeTumASfsSAAE1gumolX8028.png"}),n(),m,v,l(a,{alt:"image (5).png",src:"https://s0.lgstatic.com/i/image6/M01/02/F6/CioPOWAeTv6AfrS5AAlphh6ZKdE114.png"}),n(),k])}const V=o(r,[["render",K]]);export{P as __pageData,V as default};
