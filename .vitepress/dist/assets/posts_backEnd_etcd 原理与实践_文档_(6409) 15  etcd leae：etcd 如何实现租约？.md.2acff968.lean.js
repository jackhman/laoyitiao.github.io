import{_ as e,j as o,o as t,g as c,k as n,h as l,Q as p,s}from"./chunks/framework.4e7d56ce.js";const B=JSON.parse('{"title":"15etcdleae：etcd如何实现租约？","description":"","frontmatter":{},"headers":[],"relativePath":"posts/backEnd/etcd 原理与实践_文档/(6409) 15  etcd leae：etcd 如何实现租约？.md","filePath":"posts/backEnd/etcd 原理与实践_文档/(6409) 15  etcd leae：etcd 如何实现租约？.md","lastUpdated":1696682708000}'),r={name:"posts/backEnd/etcd 原理与实践_文档/(6409) 15  etcd leae：etcd 如何实现租约？.md"},E=p("",11),y=s("p",null,"Lease 模块涉及的主要对象和接口",-1),i=s("p",null,"除此之外，lessor 还启动了两个异步 goroutine：RevokeExpiredLease 和 CheckpointScheduledLease，分别用于撤销过期的租约和更新 Lease 的剩余到期时间。",-1),F=s("p",null,"下图是客户端创建一个指定 TTL 的租约流程，当 etcd 服务端的 gRPC Server 接收到创建 Lease 的请求后，Raft 模块首先进行日志同步；接着 MVCC 调用 Lease 模块的 Grant 接口，保存对应的日志条目到 ItemMap 结构中，接着将租约信息存到 boltdb；最后将 LeaseID 返回给客户端，Lease 创建成功。",-1),d=p("",43),L=s("p",null,"学习完这一讲，我想给大家留一个问题，你知道在 etcd 重启之后，Lease 与键值对的绑定关系是如何重建的吗？欢迎你在留言区和我分享自己的想法。下一讲，我们将从整体来梳理 etcd 启动的过程。",-1);function D(C,A,h,u,m,k){const a=o("Image");return t(),c("div",null,[E,n(a,{alt:"Drawing 0.png",src:"https://s0.lgstatic.com/i/image6/M01/1D/0B/Cgp9HWBPGqaAOSvBAAApAR0Pn5s728.png"}),l(),y,i,F,n(a,{alt:"Drawing 1.png",src:"https://s0.lgstatic.com/i/image6/M01/1D/08/CioPOWBPGq6AbSSHAAAmYqC-FLA568.png"}),l(),d,n(a,{alt:"Drawing 2.png",src:"https://s0.lgstatic.com/i/image6/M00/1D/0B/Cgp9HWBPGsqAJAozAAE8kcN24Nw326.png"}),l(),L])}const I=e(r,[["render",D]]);export{B as __pageData,I as default};
